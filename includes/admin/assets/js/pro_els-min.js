function ui_dadfile_efb(e,t){let a=valj_efb[e].file;a=efb_var.text[a];let i=valj_efb[e].hasOwnProperty("disabled")&&1==valj_efb[e].disabled?"disabled":"";return filetype_efb={image:"image/png, image/jpeg, image/jpg, image/gif, image/heic",media:"audio/mpeg, audio/wav, audio/ogg, video/mp4, video/webm, video/x-matroska, video/avi, video/mpeg , video/mpg, audio/mpg, video/mov, video/quicktime",document:".xlsx,.xls,.doc,.docx,.ppt, pptx,.pptm,.txt,.pdf,.dotx,.rtf,.odt,.ods,.odp,application/pdf,  text/plain, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.ms-powerpoint.presentation.macroEnabled.12, application/vnd.openxmlformats-officedocument.wordprocessingml.template,application/vnd.oasis.opendocument.spreadsheet, application/vnd.oasis.opendocument.presentation, application/vnd.oasis.opendocument.text",zip:".zip, application/zip, application/octet-stream, application/x-zip-compressed, multipart/x-zip",allformat:"image/png, image/jpeg, image/jpg, image/gif audio/mpeg, audio/wav, audio/ogg, video/mp4, video/webm, video/x-matroska, video/avi, video/mpeg , video/mpg, audio/mpg .xlsx,.xls,.doc,.docx,.ppt, pptx,.pptm,.txt,.pdf,.dotx,.rtf,.odt,.ods,.odp,application/pdf,  text/plain, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.ms-powerpoint.presentation.macroEnabled.12, application/vnd.openxmlformats-officedocument.wordprocessingml.template,application/vnd.oasis.opendocument.spreadsheet, application/vnd.oasis.opendocument.presentation, application/vnd.oasis.opendocument.text .zip, application/zip, application/octet-stream, application/x-zip-compressed, multipart/x-zip, .heic, image/heic, video/mov, .mov, video/quicktime, video/quicktime"},`<div class="efb icon efb"><i class="efb  fs-3 ${valj_efb[e].icon} ${valj_efb[e].icon_color}" id="${valj_efb[e].id_}_icon"></i></div>\n    <h6 id="${valj_efb[e].id_}_txt" class="efb text-center m-1 fs-6">${efb_var.text.dragAndDropA} ${a} </h6> <span class="efb fs-7">${efb_var.text.or}</span>\n    <button type="button" class="efb  btn ${valj_efb[e].button_color} efb-btn-lg fs-6" id="${valj_efb[e].id_}_b" ${i}>\n        <i class="efb  bi-upload mx-2 fs-6"></i>${efb_var.text.browseFile}\n    </button>\n   <input type="file" hidden="" accept="${filetype_efb[valj_efb[e].value]}" data-type="dadfile" data-vid='${valj_efb[e].id_}' data-ID='${valj_efb[e].id_}' class="efb  emsFormBuilder_v   ${1==valj_efb[e].required||1==valj_efb[e].required?"required":""}" id="${valj_efb[e].id_}_" data-id="${valj_efb[e].id_}-el" ${1!=t?"disabled":""} ${i}>`}function viewfileEfb(e,t){let a=fileEfb.type;fileEfb.name;let i="";switch(valj_efb[t].file){case"document":case"allformat":i="bi-file-earmark-richtext";break;case"media":i="bi-file-earmark-play";break;case"zip":i="bi-file-earmark-zip";break}let n=`<div class="efb ">\n    <button type="button" class="efb btn btn-delete btn-sm bi-x-lg efb" id="rmvFileEfb" onClick="removeFileEfb('${e}',${t})"\n         aria-label="Close" data-bs-toggle="tooltip" data-bs-placement="top" title="${efb_var.text.removeTheFile}"></button> \n         <div class="efb card efb">\n          <i class="efb  ico-file ${i} ${valj_efb[t].icon_color} text-center fs-2"></i>\n          <span class="efb  text-muted">${fileEfb.name}</span>\n          </div>\n    </div>`;if(fun_addProgessiveEl_efb(e,0),validExtensions_efb_fun(valj_efb[t].file,a)){let a=new FileReader;a.onload=()=>{let i=a.result;const l=document.getElementById(`${e}_box`);"image"==valj_efb[t].file?l.innerHTML=`<div class="efb ">\n              <button type="button" class="efb btn btn-delete btn-sm bi-x-lg efb" id="rmvFileEfb" onClick="removeFileEfb('${e}',${t})"\n                   aria-label="Close" data-bs-toggle="tooltip" data-bs-placement="top" title=${efb_var.text.removeTheFile}"></button> \n              <img src="${i}" alt="image">\n              </div>`:l.innerHTML=n},a.readAsDataURL(fileEfb),document.getElementById(`${e}_-message`).innerHTML="",document.getElementById(`${e}_-message`).classList.remove("show")}else{const a=`${efb_var.text.pleaseUploadA} ${efb_var.text[valj_efb[t].file]}`;document.getElementById(`${e}_-message`).innerHTML=a,document.getElementById(`${e}_-message`).classList.contains("show")&&document.getElementById(`${e}_-message`).classList.add("show"),alert_message_efb("",a,4,"danger"),document.getElementById(`${e}_box`).classList.remove("active"),fileEfb=[]}}function viewfileReplyEfb(e,t){let a=fileEfb.type;fileEfb.name;if(validExtensions_efb_fun("allformat",a)){fun_addProgessiveEl_efb("resp_file_efb",1);let e=new FileReader;e.onload=()=>{e.result},e.readAsDataURL(fileEfb),files_emsFormBuilder=[{id_:"resp_file_efb",value:"@file@",state:0,url:"",type:"file",name:"file",session:sessionPub_emsFormBuilder,amount:0}],fun_upload_file_api_emsFormBuilder("resp_file_efb","allformat","resp"),document.getElementById("name_attach_efb").innerHTML=fileEfb.name.length>10?`${fileEfb.name.slice(0,7)}..`:fileEfb.name}else{const e=`${efb_var.text.pleaseUploadA} ${efb_var.text.media} | ${efb_var.text.document} | ${efb_var.text.zip} `;alert_message_efb("",e,4,"danger"),fileEfb=[]}}function removeFileEfb(e,t){if(fileEfb="",document.getElementById(`${e}_box`).innerHTML=ui_dadfile_efb(t),setTimeout((()=>{create_dadfile_efb(e,t),document.getElementById(`${e}_`).addEventListener("change",(()=>{valid_file_emsFormBuilder(e)}))}),500),"undefined"!=typeof sendBack_emsFormBuilder_pub){let t=sendBack_emsFormBuilder_pub.findIndex((t=>t.id_==e));-1!=t?(sendBack_emsFormBuilder_pub.splice(t,1),t=files_emsFormBuilder.findIndex((t=>t.id_==e)),files_emsFormBuilder[t].url=""):(t=files_emsFormBuilder.findIndex((t=>t.id_==e)),-1!=t&&(files_emsFormBuilder[t].url="",setTimeout((()=>{t=sendBack_emsFormBuilder_pub.findIndex((t=>t.id_==e)),-1!=t&&sendBack_emsFormBuilder_pub.splice(t,1)}),100)))}fun_removeProgessiveEl_efb(e)}function gm_authFailure(){const e=`<p class="efb fs-6 efb">${efb_var.text.aPIkeyGoogleMapsFeild} <a href="https://developers.google.com/maps/documentation/javascript/error-messages" target="blank">${efb_var.text.clickHere}</a> </p>`;alert_message_efb(efb_var.text.error,e,15,"danger")}function renderCanvas_efb(){if(draw_mouse_efb){c2d_contex_efb.moveTo(lastMousePostion_efb.x,lastMousePostion_efb.y),c2d_contex_efb.lineTo(mousePostion_efb.x,mousePostion_efb.y),c2d_contex_efb.stroke(),lastMousePostion_efb=mousePostion_efb;const e=document.getElementById(`${canvas_id_efb}_`).toDataURL();document.getElementById(`${canvas_id_efb}-sig-data`).value=e}}function fun_clear_esign_efb(e){const t=document.getElementById(`${e}_`);document.getElementById(`${e}-sig-data`).value="Data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";const a=t.getContext("2d");a.clearRect(0,0,t.width,t.height);var i=t.width;t.width=1,t.width=i,a.lineWidth=5,a.strokeStyle="#000000",a.save();const n=sendBack_emsFormBuilder_pub.findIndex((t=>t.id_===e));-1!=n&&sendBack_emsFormBuilder_pub.splice(n,1)}function getmousePostion_efb(e,t){let a=e.getBoundingClientRect();return{y:t.clientY-a.top,x:t.clientX-a.left}}function getTouchPos_efb(e,t){let a=e.getBoundingClientRect();return{y:t.touches[0].clientY-a.top,x:t.touches[0].clientX-a.left}}function yesNoGetEFB(e,t,a){if("undefined"!=typeof sendBack_emsFormBuilder_pub){let i=a.slice(0,-4);i="_b_2"==a.slice(-4)?`${i}_b_1`:`${i}_b_2`,document.getElementById(i).classList.remove("btn-set"),i=document.getElementById(a),i.classList.contains("btn-set")||i.classList.add("btn-set");const n=valj_efb.findIndex((e=>e.id_==t)),l=[{id_:t,name:valj_efb[n].name,amount:valj_efb[n].amount,type:"yesNo",value:e,session:sessionPub_emsFormBuilder}];fun_sendBack_emsFormBuilder(l[0])}}function fun_get_rating_efb(e,t){if(document.getElementById(`${e}-stared`).value=t,document.getElementById(`${e}-star${t}`).checked=!0,"undefined"!=typeof sendBack_emsFormBuilder_pub){const a=valj_efb.findIndex((t=>t.id_==e)),i=[{id_:e,name:valj_efb[a].name,amount:valj_efb[a].amount,type:"rating",value:t,session:sessionPub_emsFormBuilder}];fun_sendBack_emsFormBuilder(i[0])}}let map;maps_el_pro_efb=(e,t,a,i)=>`\n    <div class="efb  ${1==e?t[3]:"col-md-12"} col-sm-12 "  id='${a}-f'>      \n      ${1==e&&0!=valj_efb[i].mark?`<div id="floating-panel" class="efb "><input id="delete-markers_maps_efb-efb" class="efb  btn btn-danger" type="button" value="${efb_var.text.deletemarkers}" /></div>`:"\x3c!--notPreview--\x3e"}\n        <div id="${a}-map" data-type="maps" class="efb  maps-efb emsFormBuilder_v ${valj_efb[i].el_height}  ${1==valj_efb[i].required||1==valj_efb[i].required?"required":""} " data-id="${a}-el" data-name='maps'>\n      </div>\n    `,dadfile_el_pro_efb=(e,t,a)=>{const i=valj_efb[a].hasOwnProperty("corner")?valj_efb[a].corner:"efb-square";let n=valj_efb[a].hasOwnProperty("disabled")&&1==valj_efb[a].disabled?"disabled":"";return`<div class="efb  mb-3" id="uploadFilePreEfb">\n                <label for="${t}_" class="efb  form-label">\n                    <div class="efb  dadFile-efb py-0 ${n} ${valj_efb[a].el_height} ${i}   ${valj_efb[a].el_border_color} efb1 ${valj_efb[a].classes.replace(","," ")}" data-css="${t}" id="${t}_box" ${n}>\n                    ${ui_dadfile_efb(a,e)}                            \n                    </div>\n                </label>\n            </div>`},esign_el_pro_efb=(e,t,a,i,n)=>{const l=valj_efb[i].hasOwnProperty("corner")?valj_efb[i].corner:"efb-square";let s=valj_efb[i].hasOwnProperty("disabled")&&1==valj_efb[i].disabled?"disabled":"";return`<div class="efb  ${t[3]} col-sm-12" id ="${a}-f">\n    <canvas class="efb  sign-efb bg-white ${valj_efb[i].el_height} ${l} ${valj_efb[i].el_text_color} ${valj_efb[i].el_border_color} efb1 ${valj_efb[i].classes.replace(","," ")}" data-css="${a}" data-code="${a}"  data-id="${a}-el" id="${a}_" width="600" height="200">\n        ${efb_var.text.updateUrbrowser}\n    </canvas>\n   ${1==e?`<input type="hidden" data-type="esign" data-vid='${a}' class="efb  emsFormBuilder_v ${1==valj_efb[i].required||1==valj_efb[i].required?"required":""}" id="${a}-sig-data" value="Data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==">`:""}\n    <div class="efb  mx-1">${n}</div>\n    <div class="efb  mb-3"><button type="button" class="efb  btn ${l} ${valj_efb[i].button_color} efb-btn-lg mt-1 fs-6 ${s}" id="${a}_b" onClick="fun_clear_esign_efb('${a}')">  <i class="efb  ${valj_efb[i].icon} mx-2 ${"default"!=valj_efb[i].icon_color?valj_efb[i].icon_color:""} " id="${a}_icon"></i><span id="${a}_button_single_text" class="efb  ${valj_efb[i].icon_color} efb " ${s}>${valj_efb[i].button_single_text}</span></button></div>\n      `},rating_el_pro_efb=(e,t,a,i)=>{let n=valj_efb[i].hasOwnProperty("disabled")&&1==valj_efb[i].disabled?"disabled":"";return` <div class="efb  ${t[3]} col-sm-12" id ="${a}-f">\n      <div class="efb  star-efb d-flex justify-content-center ${n} efb1 ${valj_efb[i].classes.replace(","," ")}" data-css="${a}"> \n                        <input type="radio" id="${a}-star5" data-vid='${a}' data-type="rating" class="efb "   data-star='star'  name="${a}-star-efb" value="5" data-name="star"  data-id="${a}-el" ${1!=e?"disabled":""}  ${n}>\n                        <label id="${a}_star5" for="${a}-star5"  ${1==e&&0==n?`onClick="fun_get_rating_efb('${a}',5)"`:""} title="5stars" class="efb  ${valj_efb[i].el_height} star ${n}">5 ${efb_var.text.stars}</label>\n                        <input type="radio" id="${a}-star4" data-vid='${a}' data-type="rating" class="efb "  data-star='star' name="${a}-star-efb" value="4" data-name="star"  data-id="${a}-el" ${1!=e?"disabled":""}  ${n}>\n                        <label id="${a}_star4"  for="${a}-star4" ${1==e&&0==n?`onClick="fun_get_rating_efb('${a}',4)"`:""} title="4stars" class="efb  ${valj_efb[i].el_height} star ${n}">4 ${efb_var.text.stars}</label>\n                        <input type="radio" id="${a}-star3" data-vid='${a}' data-type="rating" class="efb "  data-star='star' name="${a}-star-efb" data-name="star" value="3"  data-id="${a}-el" ${1!=e?"disabled":""}  ${n}>\n                        <label id="${a}_star3" for="${a}-star3"  ${1==e&&0==n?`onClick="fun_get_rating_efb('${a}',3)"`:""} title="3stars" class="efb  ${valj_efb[i].el_height} star ${n}">3 ${efb_var.text.stars}</label>\n                        <input type="radio" id="${a}-star2" data-vid='${a}' data-type="rating" class="efb "  data-star='star' data-name="star" name="${a}-star-efb" value="2"  data-id="${a}-el" ${1!=e?"disabled":""}  ${n}>\n                        <label id="${a}_star2" for="${a}-star2" ${1==e&&0==n?`onClick="fun_get_rating_efb('${a}',2)"`:""} title="2stars" class="efb  ${valj_efb[i].el_height} star ${n}">2 ${efb_var.text.stars}</label>\n                        <input type="radio" id="${a}-star1" data-vid='${a}' data-type="rating" class="efb " data-star='star' data-name="star" name="${a}-star-efb" value="1"  data-id="${a}-el" ${1!=e?"disabled":""}  ${n}>\n                        <label id="${a}_star1" for="${a}-star1" ${1==e&&0==n?`onClick="fun_get_rating_efb('${a}',1)"`:""} title="1star" class="efb   ${valj_efb[i].el_height} star ${n}">1 ${efb_var.text.star}</label>\n      </div>  \n      <input type="hidden" data-vid="${a}" data-type="rating" class="efb emsFormBuilder_v ${1==valj_efb[i].required||1==valj_efb[i].required?"required":""}" id="${a}-stared" >`},pointer10_el_pro_efb=(e,t,a)=>{let i=valj_efb[a].hasOwnProperty("disabled")&&1==valj_efb[a].disabled?"disabled":"";return e=1!=e?"disabled":"",` <div class="efb  NPS flex-row  justify-content-right efb1 ${valj_efb[a].classes.replace(","," ")}" data-css="${valj_efb[a].id_}" id="${valj_efb[a].id_}" >     \n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="0"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)">0</div>                            \n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="1"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)"> 1</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="2"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)"> 2</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="3"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)"> 3</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="4"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)"> 4</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="5"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)"> 5</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="6"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)"> 6</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="7"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)"> 7</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="8"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)"> 8</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="9"  data-id="${valj_efb[a].id_}"  onclick="fun_nps_rating(this)">9</div>\n  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${e} ${i}"  data-point="10"  data-id="${valj_efb[a].id_}" onclick="fun_nps_rating(this)">10</div>\n  <input type="hidden" data-vid="${valj_efb[a].id_}" data-type="rating"  id="${valj_efb[a].id_}-nps-rating" >\n  </div> `},pointer5_el_pro_efb=(e,t,a)=>{let i=valj_efb[a].hasOwnProperty("disabled")&&1==valj_efb[a].disabled?"disabled":"";return e=1!=e?"disabled":"",`   <div class="efb d-flex justify-content-right efb1 ${valj_efb[a].classes.replace(","," ")}" data-css="${valj_efb[a].id_}" id="${valj_efb[a].id_}"> \n  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${e} ${i}" data-point="1" data-id="${valj_efb[a].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>\n  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${e} ${i}" data-point="2" data-id="${valj_efb[a].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>\n  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${e} ${i}" data-point="3" data-id="${valj_efb[a].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>\n  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${e} ${i}" data-point="4" data-id="${valj_efb[a].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>\n  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${e} ${i}" data-point="5" data-id="${valj_efb[a].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>\n  <input type="hidden" data-vid="${valj_efb[a].id_}" data-type="rating" id="${valj_efb[a].id_}-point-rating">\n  </div> `},smartcr_el_pro_efb=(e,t,a)=>"<h3> Smart</h3> ",countryList_el_pro_efb=(e,t,a,i,n)=>{let l="\x3c!--countreies--\x3e";if(0!=n){const t=valj_efb.filter((t=>t.parent===e)),a=valj_efb.findIndex((t=>t.id_==e));for(const e of t)l+=`<option value="${e.value}" id="${e.id_}" data-id="${e.id_}" data-op="${e.id_}" class="efb ${valj_efb[a].el_text_color} emsFormBuilder_v efb"  ${valj_efb[a].value==e.id_||e.hasOwnProperty("id_old")&&valj_efb[a].value==e.id_old?"selected":""}>${e.value}</option>`}else if("object"!=typeof counstries_list_efb)l=`\n            <option value="${efb_var.text.newOption} 1" id="${t}" data-vid='${e}' data-id="${a}" data-op="${a}" class="efb text-dark efb" >${efb_var.text.newOption} 1</option>\n            <option value="${efb_var.text.newOption} 2" id="${t}" data-vid='${e}' data-id="${i}" data-op="${i}" class="efb text-dark efb" >${efb_var.text.newOption} 2</option>\n           `,optionElpush_efb(e,`${efb_var.text.newOption} 1`,t,a,"select"),optionElpush_efb(e,`${efb_var.text.newOption} 2`,t,i,"select");else{let a="\x3c!-- list of counries --\x3e",i=0;for(let n of counstries_list_efb){i+=1;let l=t+i;const s=n.s2.toLowerCase();a+=`<option value="${n.n} (${n.l})" id="${l}" data-vid='${e}' data-id="${s}" data-op="${s}" class="efb text-dark efb fs-6" >${n.n} (${n.l})</option>`,optionElpush_efb(e,`${n.n} (${n.l})`,l,s,"select")}}return l},statePrevion_el_pro_efb=(e,t,a,i,n)=>{let l="\x3c!--states--\x3e";const s=valj_efb.filter((t=>t.parent===e)),d=valj_efb.findIndex((t=>t.id_==e));if(0!=n)for(const e of s)l+=`<option value="${e.value}" id="${e.id_}" data-id="${e.id_}" data-op="${e.id_}" class="efb ${valj_efb[d].el_text_color} emsFormBuilder_v efb" ${valj_efb[d].value==e.id_||e.hasOwnProperty("id_old")&&valj_efb[d].value==e.id_old?"selected":""}>${e.value}</option>`;else if("object"!=typeof state_local)l=`\n            <option value="${efb_var.text.newOption} 1" id="${t}" data-vid='${e}' data-id="${a}" data-op="${a}" class="efb text-dark efb" >${efb_var.text.newOption} 1</option>\n            <option value="${efb_var.text.newOption} 2" id="${t}" data-vid='${e}' data-id="${i}" data-op="${i}" class="efb text-dark efb" >${efb_var.text.newOption} 2</option>\n           `,"stateProvince"!=valj_efb[d].type&&optionElpush_efb(e,`${efb_var.text.newOption} 1`,t,a,"select");else{state_local.sort();let a="\x3c!-- list of states --\x3e",i=0;for(let n=0;n<state_local.length;n++){i+=1;let l=t+i;a+=`<option value="${state_local[n]} 1" id="${l}" data-vid='${e}' data-id="${state_local[n]}" data-op="${state_local[n]}" class="efb text-dark efb" ${valj_efb[d].value==n.id_||valj_efb[d].value==n.id_old?"selected":""}>${state_local[n]}</option>`,optionElpush_efb(e,state_local[n],l,state_local[n],"select")}}return l},headning_el_pro_efb=(e,t,a)=>` <div class="efb px-0 mx-0  ${t[0]} col-sm-12"  id='${e}-f'>\n    <p  id="${e}_"  class="efb  px-0  emsFormBuilder_v  ${valj_efb[a].el_text_color} ${valj_efb[a].el_text_size}   efbField efb1 ${valj_efb[a].classes.replace(","," ")}" data-css="${e}" data-vid='${e}' data-id="${e}-el" >${valj_efb[a].value}</p>\n    </div>`,link_el_pro_efb=(e,t,a,i)=>`<div class="efb ${t[0]} px-0 mx-0   col-sm-12"  id='${a}-f'>\n    <a  id="${a}_"  target="_blank" class="efb  px-0 btn underline emsFormBuilder_v ${1!=e?"disabled":""}  ${valj_efb[i].el_text_color} ${valj_efb[i].el_text_size} efbField efb1 ${valj_efb[i].classes.replace(","," ")}" data-css="${a}" data-vid='${a}' data-id="${a}-el" href="${valj_efb[i].href}">${valj_efb[i].value}</a>\n    </div>`,yesNi_el_pro_efb=(e,t,a,i)=>{const n=valj_efb[i].hasOwnProperty("corner")?valj_efb[i].corner:"efb-square";let l=valj_efb[i].hasOwnProperty("disabled")&&1==valj_efb[i].disabled?"disabled":"";return`<div class="efb ${t[3]} col-sm-12 efb  ${l} efb1 ${valj_efb[i].classes.replace(","," ")}" data-css="${a}"  id='${a}-f'>\n    <div class="efb  btn-group  btn-group-toggle w-100  col-md-12 col-sm-12  ${1==valj_efb[i].required||1==valj_efb[i].required?"required":""}" data-toggle="buttons" data-id="${a}-id" id="${a}_yn">    \n    <label for="${a}_1" data-lid="${a}" data-value="${valj_efb[i].button_1_text}" onClick="yesNoGetEFB('${valj_efb[i].button_1_text}', '${a}' ,'${a}_b_1')" class="efb  btn ${valj_efb[i].button_color} ${valj_efb[i].el_text_color} ${valj_efb[i].el_height} ${n} yesno-efb left-efb  ${l} ${1!=e?"disabled":""}" id="${a}_b_1">\n      <input type="radio" name="${a}" data-type="switch" class="efb opButtonEfb elEdit emsFormBuilder_v efb" data-vid='${a}' data-id="${a}-id" id="${a}_1" value="${valj_efb[i].button_1_text}"><span id="${a}_1_lab">${valj_efb[i].button_1_text}</span></label>\n    <span class="efb border-right border border-light efb"></span>\n    <label for="${a}_2" data-lid="${a}" data-value="${valj_efb[i].button_2_text}" onClick="yesNoGetEFB('${valj_efb[i].button_2_text}' ,'${a}','${a}_b_2')" class="efb  btn ${valj_efb[i].button_color} ${valj_efb[i].el_text_color} ${valj_efb[i].el_height} ${n} yesno-efb right-efb  ${l} ${1!=e?"disabled":""}" id="${a}_b_2">\n      <input type="radio" name="${a}" data-type="switch" class="efb opButtonEfb elEdit emsFormBuilder_v efb" data-vid='${a}' data-id="${a}-id" id="${a}_2" value="${valj_efb[i].button_2_text}"> <span id="${a}_2_lab">${valj_efb[i].button_2_text}</span></label>\n    </div>`},html_el_pro_efb=(e,t,a)=>{let i="";return valj_efb[a].value.length<2?i=` \n        <div class="efb col-sm-12 efb"  id='${t}-f' data-id="${t}-el" data-tag="htmlCode">            \n            <div class="efb boxHtml-efb sign-efb efb" id="${t}_html">\n            <div class="efb noCode-efb m-5 text-center efb" id="${t}_noCode">\n              ${efb_var.text.noCodeAddedYet} <button type="button" class="efb BtnSideEfb btn efb btn-edit efb btn-sm" id="settingElEFb"\n              data-id="${t}-id" data-bs-toggle="tooltip" title="${efb_var.text.edit}"\n              onclick="show_setting_window_efb('${t}-id')">\n              <div class="icon-container efb"><i class="efb   bi-gear-wide-connected text-success" id="efbSetting"></i></div></button>${efb_var.text.andAddingHtmlCode}\n          </div></div></div>`:(i=valj_efb[a].value.replace(/@!/g,'"'),i=valj_efb[a].value.replace(/@efb@nq#/g,"")+"\x3c!--endhtml first --\x3e",i=`<div ${0==e?`class="efb bg-light" id="${t}_html" `:""}> ${i} </div>`),i},set_dadfile_fun_efb=(e,t)=>{setTimeout((()=>{create_dadfile_efb(e,t)}),50)},create_dadfile_efb=(e,t)=>{let a=document.getElementById(`${e}_box`),i=a.querySelector("h6"),n=a.querySelector("button"),l=a.querySelector("input");a.classList.remove("active"),l.disabled=!1,n.onclick=()=>{l.click()},l.addEventListener("change",(function(){fileEfb=this.files[0],a.classList.add("active"),viewfileEfb(e,t)})),a.addEventListener("dragover",(e=>{e.preventDefault(),a.classList.add("active"),i.textContent="Release to Upload File"})),a.addEventListener("dragleave",(()=>{let e=valj_efb[t].file;e=efb_var.text[e],i.textContent=`${efb_var.text.dragAndDropA} ${e}`})),a.addEventListener("drop",(i=>{i.preventDefault(),fileEfb=i.dataTransfer.files[0],document.getElementById(`${e}_`).files=i.dataTransfer.files,a.classList.add("active"),viewfileEfb(e,t),valid_file_emsFormBuilder(e)}))},reply_attach_efb=(e,t)=>{const a=reply_upload_efb(e),i=a.length/20+10;let n=document.getElementById("replay_section__emsFormBuilder");n&&(n.innerHTML+=a),setTimeout((()=>{document.getElementById("attach_efb");let e=document.getElementById("resp_file_efb_");1==pro_efb&&e&&e.addEventListener("change",(function(){fileEfb=this.files[0],viewfileReplyEfb("resp_file_efb_",t)}))}),i)},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(e){window.setTimeout(e,1e3/60)};let markers_maps_efb=[],mark_maps_efb=[];function initMap(e){setTimeout((function(){const t=valj_efb.findIndex((e=>"maps"==e.type)),a=-1!=t&&valj_efb[t].lat?Number(valj_efb[t].lat):49.24803870604257,i=-1!=t&&valj_efb[t].lng?Number(valj_efb[t].lng):-123.10512829684463,n=-1!=t?Number(valj_efb[t].mark):1,l=-1!=t&&valj_efb[t].zoom&&""!=valj_efb[t].zoom?Number(valj_efb[t].zoom):10,s={lat:a,lng:i};if("undefined"==typeof google)return alert_message_efb(efb_var.text.error,googleMapsNOkEfb(),20,"danger"),0;if("undefined"!=typeof google&&google.hasOwnProperty("maps")&&(map=new google.maps.Map(document.getElementById(`${valj_efb[t].id_}-map`),{zoom:l,center:s,mapTypeId:"roadmap"})),0!=n&&-1!=n){if(e)return;map.addListener("click",(e=>{const t=e.latLng.toJSON();mark_maps_efb.length<n&&(mark_maps_efb.push(t),addMarker(e.latLng))})),document.getElementById("delete-markers_maps_efb-efb")&&document.getElementById("delete-markers_maps_efb-efb").addEventListener("click",deletemarkers_maps_efb_efb)}else if(-1==n){const e="0ABCDEFGHIJKLMNOPQRSTUVWXYZ";let t=0;for(const a of marker_maps_efb){t+=1;const i=e[t],n={lat:a.lat,lng:a.lng},l=new google.maps.Marker({position:n,label:i,map:map});markers_maps_efb.push(l)}}else addMarker(s)}),1e3)}function addMarker(e){const t="0ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=valj_efb.findIndex((e=>"maps"==e.type)),i=mark_maps_efb.length,n=-1!==a&&valj_efb[a].mark<2?"":t[i%t.length],l=new google.maps.Marker({position:e,label:n,map:map});if(markers_maps_efb.push(l),"undefined"!=typeof sendBack_emsFormBuilder_pub){JSON.stringify(mark_maps_efb);const e=[{id_:valj_efb[a].id_,name:valj_efb[a].name,amount:valj_efb[a].amount,type:"maps",value:mark_maps_efb,session:sessionPub_emsFormBuilder}];fun_sendBack_emsFormBuilder(e[0])}}function setMapOnAll(e){for(let t=0;t<markers_maps_efb.length;t++)markers_maps_efb[t].setMap(e)}function hidemarkers_maps_efb(){setMapOnAll(null)}function showmarkers_maps_efb(){setMapOnAll(map)}function deletemarkers_maps_efb_efb(){if(hidemarkers_maps_efb(),markers_maps_efb=[],mark_maps_efb=[],"undefined"!=typeof sendBack_emsFormBuilder_pub){const e=sendBack_emsFormBuilder_pub.findIndex((e=>"maps"==e.type));-1!=e&&sendBack_emsFormBuilder_pub.splice(e,1)}}function closed_resp_emsFormBuilder(e){const t=`<div class="efb   mb-3"><div class="efb  clearfix">${0==stock_state_efb?efb_var.text.clsdrspnsM:efb_var.text.clsdrspnsMo}</div></div>`;show_modal_efb(t,efb_var.text.close,"efb bi-x-octagon-fill mx-2","deleteBox");const a=document.getElementById("modalConfirmBtnEfb");state_modal_show_efb(1),a.addEventListener("click",(t=>{close_resp_efb(e,stock_state_efb),activeEl_efb=0,state_modal_show_efb(0)})),window.scrollTo({top:0,behavior:"smooth"})}function fun_point_rating(e){const t=e.dataset.id;for(let a of document.querySelectorAll(`[data-id="${t}"]`))Number(a.dataset.point)<=Number(e.dataset.point)?a.className=btnChangerEfb(a.className,pub_bg_button_color_efb):a.className=btnChangerEfb(a.className,"btn-secondary");if(document.getElementById(t+"-point-rating").value=e.dataset.point,"run"==state_efb){const a=valj_efb.find((e=>e.id_==t));if("r_matrix"==a.type){const t=[{id_ob:a.id_,name:a.value,id_:a.parent,amount:a.amount,type:a.type,value:e.dataset.point,session:sessionPub_emsFormBuilder}];fun_sendBack_emsFormBuilder(t[0]);const i=valj_efb.filter((e=>e.parent==a.parent));1==valj_efb.find((e=>e.id_==a.parent)).required&&setTimeout((()=>{const e=sendBack_emsFormBuilder_pub.filter((e=>e.parent==a.parent));i.length,e.length}),500)}else{const t=[{id_:a.id_,name:a.name,amount:a.amount,type:a.type,value:e.dataset.point,session:sessionPub_emsFormBuilder}];fun_sendBack_emsFormBuilder(t[0])}}}function fun_nps_rating(e){const t=e.dataset.id;e.className=btnChangerEfb(e.className,pub_bg_button_color_efb);for(let a of document.querySelectorAll(`[data-id="${t}"]`))Number(a.dataset.point)!=Number(e.dataset.point)&&(a.className=btnChangerEfb(a.className,"btn-outline-secondary"));if(document.getElementById(t+"-nps-rating").value=e.dataset.point,"run"==state_efb){const a=valj_efb.find((e=>e.id_==t)),i=[{id_:a.id_,name:a.name,amount:a.amount,type:a.type,value:e.dataset.point,session:sessionPub_emsFormBuilder}];fun_sendBack_emsFormBuilder(i[0])}}function fun_switch_efb(e){if("run"!=state_efb)return;const t=valj_efb.find((t=>t.id_==e.dataset.vid));setTimeout((()=>{let a=[{id_:t.id_,name:t.name,amount:t.amount,type:t.type,value:"1",session:sessionPub_emsFormBuilder}];0==e.classList.contains("active")&&(a[0].value="0"),fun_sendBack_emsFormBuilder(a[0])}),100)}function create_intlTelInput_efb(e,t,a,i){let n=valj_efb[t].hasOwnProperty("disabled")&&1==valj_efb[t].disabled?"disabled":"";return load_intlTelInput_efb(e,t),`\n  <input type="phone" class="efb  input-efb intlPhone px-2 mb-0 emsFormBuilder_v form-control ${valj_efb[t].el_border_color}  ${valj_efb[t].el_height} ${i} ${valj_efb[t].el_text_color} ${1==valj_efb[t].required||1==valj_efb[t].required?"required":""}  efbField efb1 ${valj_efb[t].classes.replace(","," ")}" data-css="${e}" data-id="${e}-el" data-vid='${e}' id="${e}_"  ${valj_efb[t].value.length>0?value=`"${valj_efb[t].value}"`:""} ${1!=a?"readonly":""} ${n}>\n  <input type="phone" class="efb  input-efb intlPhone px-2 mb-0 emsFormBuilder_v form-control ${valj_efb[t].el_border_color}  ${valj_efb[t].el_height} ${i} ${valj_efb[t].el_text_color} ${1==valj_efb[t].required||1==valj_efb[t].required?"required":""}  efbField d-none efb1 ${valj_efb[t].classes.replace(","," ")}" data-css="${e}" data-id="${e}-el" data-vid='${e}' id="${e}-code" placeholder="verify"  ${valj_efb[t].value.length>0?value=`"${valj_efb[t].value}"`:""} ${1!=a?"readonly":""} ${n}>\n  <button id="${e}-btn" type="submit" class="efb d-none">Submit</button>\n `}googleMapsNOkEfb=()=>`<div class="efb  boxHtml-efb sign-efb h-100" >\n         <div class="efb  noCode-efb m-5 text-center text-light">\n         <button type="button" class="efb  btn btn-edit btn-sm" data-bs-toggle="tooltip" title="${efb_var.text.howToAddGoogleMap}" onclick="open_whiteStudio_efb('mapErorr')">\n          <i class="efb  bi-question-lg text-pinkEfb"></i></button> \n          <p class="efb fs-6">${efb_var.text.aPIkeyGoogleMapsError}</p> \n       </div></div>`,fun_addProgessiveEl_efb=(e,t)=>{let a=document.createElement("div");const i=`${e}-prG`;a.setAttribute("id",i),a.className="efb mt-3 mx-1";const n=0==t?"view-efb":"replay_section__emsFormBuilder";null==document.getElementById(`${e}-prG`)&&document.getElementById(n).append(a),document.getElementById(i).innerHTML=`<div class="efb d-flex justify-content-center"><div class="efb progress w-100" id="${e}-prA">\n  <div id="${e}-prB" class="efb  text-light text-center btn-pinkEfb progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:1%;">\n        1%\n        </div>\n    </div></div>`},fun_removeProgessiveEl_efb=e=>{document.getElementById(`${e}-prG`).remove()},reply_upload_efb=e=>{let t="\x3c!--efb.app--\x3e";if(1==pro_efb)return"panel"==page_state_efb&&(t=`<div class="efb col fs-5 h-d-efb pointer-efb text-darkb d-flex justify-content-end">\n       <button type="button" class="efb btn mt-1 efb ${1==stock_state_efb?"btn-outline-success":"btn-outline-pink"}" onclick="closed_resp_emsFormBuilder(${e})" data-state="${1==stock_state_efb?1:0}" id="respStateEfb" disabled>\n           ${1==stock_state_efb?efb_var.text.open:efb_var.text.close}\n      </button></div>`),setting_emsFormBuilder.hasOwnProperty("dsupfile")&&0==setting_emsFormBuilder.dsupfile&&0==efb_var.hasOwnProperty("setting")?"":`<div class="efb form-check">\n      <div class="efb btn btn-light text-dark" id="attach_efb">\n      <i class="bi bi-paperclip"></i><span id="name_attach_efb">${efb_var.text.file}</span>\n      <input type="file" id="resp_file_efb_" name="file"  data-id="${e}" >\n      </div>\n      ${t}\n    </div>`;{const e=`<a type="button" class="efb pro-v-btn" data-bs-toggle="tooltip" data-bs-placement="top" title="${efb_var.text.fieldAvailableInProversion}" data-original-title="${efb_var.text.fieldAvailableInProversion}" onclick="pro_show_efb(1)"><i class="efb  bi-gem text-light" ></i></a>`;return"panel"==page_state_efb&&(t=`<div class="efb col fs-5 h-d-efb pointer-efb text-darkb d-flex justify-content-end">\n      <button type="button" class="efb btn mt-1 efb ${1==stock_state_efb?"btn-outline-success":"btn-outline-pink"} "id="respStateEfb">\n      <i class="efb  bi-x-lg mx-1 efb mobile-text">${1==stock_state_efb?efb_var.text.open:efb_var.text.close}</i>\n      ${e}\n     </button></div>`),`<div class="efb form-check">\n      <div class="efb btn btn-light text-dark" id="attach_efb" >\n      <i class="bi bi-paperclip"></i><span id="name_attach_efb">${efb_var.text.file}</span>\n        ${e}\n      </div>\n       ${t}\n    </div>`}},close_resp_efb=(e,t)=>{const a=1==t?[{id_:"message",name:"message",type:"opened",amount:0,value:efb_var.text.clsdrspo,by:ajax_object_efm.user_name,session:sessionPub_emsFormBuilder}]:[{id_:"message",name:"message",type:"closed",amount:0,value:efb_var.text.clsdrspn,by:ajax_object_efm.user_name,session:sessionPub_emsFormBuilder}];sendBack_emsFormBuilder_pub=a,fun_send_replayMessage_ajax_emsFormBuilder(sendBack_emsFormBuilder_pub,e)},load_intlTelInput_efb=(e,t)=>{const a=valj_efb[t].hasOwnProperty("c_c")&&valj_efb[t].c_c.length>0?valj_efb[t].c_c:"";setTimeout((()=>{const i=window.intlTelInput(document.getElementById(e+"_"),{onlyCountries:a,autoHideDialCode:!0,placeholderNumberType:"MOBILE",utilsScript:efb_var.images.utilsJs});document.getElementById(e+"_").addEventListener("blur",(function(){const a=[efb_var.text.cpnnc,efb_var.text.icc,efb_var.text.cpnts,efb_var.text.cpntl,efb_var.text.cpnnc];if(document.getElementById(e+"_").classList.remove("border-danger"),document.getElementById(e+"_").classList.remove("border-success"),document.getElementById(e+"_-message").innerHTML="",document.getElementById(e+"_-message").classList.remove("d-block"),document.getElementById(e+"_-message").classList.add("d-none"),document.getElementById(e+"_").value.trim())if(i.isValidNumber()){document.getElementById(e+"_").classList.add("border-success");let a=`+${i.s.dialCode}${document.getElementById(e+"_").value}`;fun_sendBack_emsFormBuilder({id_:valj_efb[t].id_,name:valj_efb[t].name,id_ob:valj_efb[t].id_,amount:valj_efb[t].amount,type:valj_efb[t].type,value:a,session:sessionPub_emsFormBuilder})}else{document.getElementById(e+"_").classList.add("border-danger");let n=i.getValidationError();n=a[n]?a[n]:a[0],document.getElementById(e+"_-message").classList.remove("d-none"),document.getElementById(e+"_-message").classList.add("d-block"),document.getElementById(e+"_-message").innerHTML=n;let l=sendBack_emsFormBuilder_pub.findIndex((e=>e.id_==valj_efb[t].id_));-1!=l&&sendBack_emsFormBuilder_pub.splice(l,1)}}))}),800)},fun_imgRadio_efb=(e,t,a)=>{let i=a.hasOwnProperty("value")?a.value:efb_var.text.newOption??"",n=a.hasOwnProperty("sub_value")?a.sub_value:efb_var.text.sampleDescription??"";return t=0==t.includes("http")?efb_var.images.head:a.src,`\n    <label class="efb  " id="${e}_lab" for="${e}">\n    <div class="efb card col-md-3 mx-0 my-1 w-100" style="">\n    <img src="${t=t.replace(/(http:@efb@)+/g,"http://").replace(/(https:@efb@)+/g,"https://").replace(/(@efb@)+/g,"/")}" alt="${i}" style="width: 100%"  id="${e}_img">\n    <div class="efb card-body">\n        <h5 class="efb card-title text-dark" id="${e}_value">${i}</h5>\n        <p class="efb card-text" id="${e}_value_sub">${n}</p>    \n    </div>\n    </div>\n    </label>`},add_new_imgRadio_efb=(e,t,a,i,n)=>{const l=valj_efb.findIndex((e=>e.id_==a)),s=fun_imgRadio_efb(a,"null",valj_efb[l]);return`<div class="efb  form-check imgRadio col-md-3" data-parent="${n}" data-id="${a}"  id="${a}-v">\n  <input class="efb  form-check-input " type="radio" name="${n}"  value="${t}" id="${e}" data-id="${e}-id" data-op="${e}" disabled>\n  ${s}\n  </div>`};