function ui_dadfile_efb(indx,previewSate){let n=valj_efb[indx].file;n=efb_var.text[n],"customize"==valj_efb[indx].file&&(n=valj_efb[indx].file_ctype);var disabled=valj_efb[indx].hasOwnProperty("disabled")&&1==valj_efb[indx].disabled?"disabled":"";return filetype_efb={image:"image/png, image/jpeg, image/jpg, image/gif, image/heic",media:"audio/mpeg, audio/wav, audio/ogg, video/mp4, video/webm, video/x-matroska, video/avi, video/mpeg , video/mpg, audio/mpg, video/mov, video/quicktime",document:".xlsx,.xls,.doc,.docx,.ppt, pptx,.pptm,.txt,.pdf,.dotx,.rtf,.odt,.ods,.odp,application/pdf,  text/plain, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.ms-powerpoint.presentation.macroEnabled.12, application/vnd.openxmlformats-officedocument.wordprocessingml.template,application/vnd.oasis.opendocument.spreadsheet, application/vnd.oasis.opendocument.presentation, application/vnd.oasis.opendocument.text",zip:".zip, application/zip, application/octet-stream, application/x-zip-compressed, multipart/x-zip",allformat:"image/png, image/jpeg, image/jpg, image/gif audio/mpeg, audio/wav, audio/ogg, video/mp4, video/webm, video/x-matroska, video/avi, video/mpeg , video/mpg, audio/mpg .xlsx,.xls,.doc,.docx,.ppt, pptx,.pptm,.txt,.pdf,.dotx,.rtf,.odt,.ods,.odp,application/pdf,  text/plain, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.ms-powerpoint.presentation.macroEnabled.12, application/vnd.openxmlformats-officedocument.wordprocessingml.template,application/vnd.oasis.opendocument.spreadsheet, application/vnd.oasis.opendocument.presentation, application/vnd.oasis.opendocument.text .zip, application/zip, application/octet-stream, application/x-zip-compressed, multipart/x-zip, .heic, image/heic, video/mov, .mov, video/quicktime, video/quicktime",customize:""+valj_efb[indx].file_ctype},`<div class="efb icon efb"><i class="efb  fs-3 ${valj_efb[indx].icon} ${valj_efb[indx].icon_color}" id="${valj_efb[indx].id_}_icon"></i></div>
    <h6 id="${valj_efb[indx].id_}_txt" class="efb text-center m-1 fs-6">${efb_var.text.dragAndDropA} ${n} </h6> <span class="efb fs-7">${efb_var.text.or}</span>
    <button type="button" class="efb  btn ${valj_efb[indx].button_color} efb-btn-lg fs-6" id="${valj_efb[indx].id_}_b" ${disabled}>
        <i class="efb  bi-upload mx-2 fs-6"></i>${efb_var.text.browseFile}
    </button>
   <input type="file" hidden="" accept="${filetype_efb[valj_efb[indx].value]}" data-type="dadfile" data-vid='${valj_efb[indx].id_}' data-ID='${valj_efb[indx].id_}' class="efb  emsFormBuilder_v   ${1==valj_efb[indx].required||1==valj_efb[indx].required?"required":""}" id="${valj_efb[indx].id_}_" data-id="${valj_efb[indx].id_}-el" ${1!=previewSate?"disabled":""} ${disabled}>`}function viewfileEfb(id,indx){if(null==fileEfb)document.getElementById(valj_efb[indx].id_+"_-message").classList.remove("show");else{var filename=fileEfb.name,fileType="customize"==valj_efb[indx].file?filename.slice(filename.lastIndexOf(".")+1):fileEfb.type,filename=`<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-file-earmark" viewBox="0 0 16 16">
    <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
    <text x="50%" y="67%" dominant-baseline="middle" text-anchor="middle" fill="black" font-size="4">${filename.slice(filename.lastIndexOf(".")+1)}</text>
  </svg>`;let box_v=`<div class="efb ">
    <button type="button" class="efb btn btn-delete btn-sm bi-x-lg efb" id="rmvFileEfb" onClick="removeFileEfb('${id}',${indx})"
         aria-label="Close" data-bs-toggle="tooltip" data-bs-placement="top" title="${efb_var.text.removeTheFile}"></button> 
         <div class="efb card efb px-2 py-5">
          <i class="efb  ico-file ${valj_efb[indx].icon_color} text-center fs-2">${filename}</i>
          <span class="efb  text-muted">${fileEfb.name}</span>
          </div>
    </div>`;if(validExtensions_efb_fun(valj_efb[indx].file,fileType,indx)){fun_addProgessiveEl_efb(id,0);let fileReader=new FileReader;fileReader.onload=()=>{var fileURL=fileReader.result,box=document.getElementById(id+"_box");"image"==valj_efb[indx].file?box.innerHTML=`<div class="efb ">
              <button type="button" class="efb btn btn-delete btn-sm bi-x-lg efb" id="rmvFileEfb" onClick="removeFileEfb('${id}',${indx})"
                   aria-label="Close" data-bs-toggle="tooltip" data-bs-placement="top" title=${efb_var.text.removeTheFile}"></button> 
              <img src="${fileURL}" alt="image">
              </div>`:box.innerHTML=box_v},fileReader.readAsDataURL(fileEfb),document.getElementById(id+"_-message").innerHTML="",document.getElementById(id+"_-message").classList.remove("show")}else{let t_m="customize"!=valj_efb[indx].file?valj_efb[indx].file:valj_efb[indx].file_ctype;t_m=t_m.replaceAll(",",` ${efb_var.text.or} `);filename=efb_var.text.pleaseUploadA.replace("NN",t_m);document.getElementById(id+"_-message").innerHTML=filename,document.getElementById(id+"_-message").classList.contains("show")&&document.getElementById(id+"_-message").classList.add("show"),alert_message_efb("",filename,4,"danger"),document.getElementById(id+"_box").classList.remove("active"),fileEfb=[]}}}function viewfileReplyEfb(id,indx){var fileType=fileEfb.type;fileEfb.name;if(validExtensions_efb_fun("allformat",fileType,indx)){fun_addProgessiveEl_efb("resp_file_efb",1);let fileReader=new FileReader,fileURL;fileReader.onload=()=>{fileURL=fileReader.result},fileReader.readAsDataURL(fileEfb),files_emsFormBuilder=[{id_:"resp_file_efb",value:"@file@",state:0,url:"",type:"file",name:"file",session:sessionPub_emsFormBuilder,amount:0}],fun_upload_file_api_emsFormBuilder("resp_file_efb","allformat","resp"),document.getElementById("name_attach_efb").innerHTML=10<fileEfb.name.length?fileEfb.name.slice(0,7)+"..":fileEfb.name}else{fileType=efb_var.text.pleaseUploadA.replace("NN",`${efb_var.text.media} | ${efb_var.text.document} | `+efb_var.text.zip);alert_message_efb("",fileType,4,"danger"),fileEfb=[]}}function removeFileEfb(id,indx){if(fileEfb="",document.getElementById(id+"_box").innerHTML=ui_dadfile_efb(indx),setTimeout(()=>{create_dadfile_efb(id,indx),document.getElementById(id+"_").addEventListener("change",()=>{valid_file_emsFormBuilder(id,"msg")})},500),"undefined"!=typeof sendBack_emsFormBuilder_pub){let inx=sendBack_emsFormBuilder_pub.findIndex(x=>x.id_==id);-1!=inx?(sendBack_emsFormBuilder_pub.splice(inx,1),inx=files_emsFormBuilder.findIndex(x=>x.id_==id),files_emsFormBuilder[inx].url=""):-1!=(inx=files_emsFormBuilder.findIndex(x=>x.id_==id))&&(files_emsFormBuilder[inx].url="",setTimeout(()=>{-1!=(inx=sendBack_emsFormBuilder_pub.findIndex(x=>x.id_==id))&&sendBack_emsFormBuilder_pub.splice(inx,1)},100))}fun_removeProgessiveEl_efb(id)}function gm_authFailure(){var body=`<p class="efb fs-6 efb">${efb_var.text.aPIkeyGoogleMapsFeild} <a href="https://developers.google.com/maps/documentation/javascript/error-messages" target="blank">${efb_var.text.clickHere}</a> </p>`;alert_message_efb(efb_var.text.error,body,15,"danger")}function renderCanvas_efb(){var data;draw_mouse_efb&&(c2d_contex_efb.moveTo(lastMousePostion_efb.x,lastMousePostion_efb.y),c2d_contex_efb.lineTo(mousePostion_efb.x,mousePostion_efb.y),c2d_contex_efb.stroke(),lastMousePostion_efb=mousePostion_efb,data=document.getElementById(canvas_id_efb+"_").toDataURL(),document.getElementById(canvas_id_efb+"-sig-data").value=data)}function fun_clear_esign_efb(id){var canvas=document.getElementById(id+"_"),c2d=(document.getElementById(id+"-sig-data").value="Data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",canvas.getContext("2d")),w=(c2d.clearRect(0,0,canvas.width,canvas.height),canvas.width),canvas=(canvas.width=1,canvas.width=w,c2d.lineWidth=5,c2d.strokeStyle="#000000",c2d.save(),sendBack_emsFormBuilder_pub.findIndex(x=>x.id_===id));-1!=canvas&&sendBack_emsFormBuilder_pub.splice(canvas,1)}function getmousePostion_efb(canvasDom,mouseEvent){canvasDom=canvasDom.getBoundingClientRect();return{y:mouseEvent.clientY-canvasDom.top,x:mouseEvent.clientX-canvasDom.left}}function getTouchPos_efb(canvasDom,touchEvent){canvasDom=canvasDom.getBoundingClientRect();return{y:touchEvent.touches[0].clientY-canvasDom.top,x:touchEvent.touches[0].clientX-canvasDom.left}}function yesNoGetEFB(v,id,idl){var iv;"undefined"!=typeof sendBack_emsFormBuilder_pub&&(iv=idl.slice(0,-4),iv="_b_2"==idl.slice(-4)?iv+"_b_1":iv+"_b_2",document.getElementById(iv).classList.remove("btn-set"),(iv=document.getElementById(idl)).classList.contains("btn-set")||iv.classList.add("btn-set"),idl=valj_efb.findIndex(x=>x.id_==id),iv=[{id_:id,name:valj_efb[idl].name,amount:valj_efb[idl].amount,type:"yesNo",value:v,session:sessionPub_emsFormBuilder}],fun_sendBack_emsFormBuilder(iv[0]))}function fun_get_rating_efb(v,no){var indx;document.getElementById(v+"-stared").value=no,document.getElementById(v+"-star"+no).checked=!0,"undefined"!=typeof sendBack_emsFormBuilder_pub&&(indx=valj_efb.findIndex(x=>x.id_==v),indx=[{id_:v,name:valj_efb[indx].name,amount:valj_efb[indx].amount,type:"rating",value:no,session:sessionPub_emsFormBuilder}],fun_sendBack_emsFormBuilder(indx[0]))}maps_el_pro_efb=(previewSate,pos,rndm,iVJ)=>`
    <div class="efb  ${1==previewSate?pos[3]:"col-md-12"} col-sm-12 "  id='${rndm}-f'>      
      ${1==previewSate&&0!=valj_efb[iVJ].mark?`<div id="floating-panel" class="efb "><input id="delete-markers_maps_efb-efb" class="efb  btn btn-danger" type="button" value="${efb_var.text.deletemarkers}" /></div>`:"\x3c!--notPreview--\x3e"}
        <div id="${rndm}-map" data-type="maps" class="efb  maps-efb emsFormBuilder_v ${valj_efb[iVJ].el_height}  ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""} " data-id="${rndm}-el" data-name='maps'>
      </div>
    `,dadfile_el_pro_efb=(previewSate,rndm,iVJ)=>{var corner=valj_efb[iVJ].hasOwnProperty("corner")?valj_efb[iVJ].corner:"efb-square",disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";return`<div class="efb  mb-3" id="uploadFilePreEfb">
                <label for="${rndm}_" class="efb  form-label">
                    <div class="efb  dadFile-efb py-0 ${disabled} ${valj_efb[iVJ].el_height} ${corner}   ${valj_efb[iVJ].el_border_color} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" id="${rndm}_box" ${disabled}>
                    ${ui_dadfile_efb(iVJ,previewSate)}                            
                    </div>
                </label>
            </div>`},esign_el_pro_efb=(previewSate,pos,rndm,iVJ,desc)=>{var corner=valj_efb[iVJ].hasOwnProperty("corner")?valj_efb[iVJ].corner:"efb-square",disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";return`<div class="efb  ${pos[3]} col-sm-12" id ="${rndm}-f">
    <canvas class="efb  sign-efb bg-white ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_text_color} ${valj_efb[iVJ].el_border_color} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-code="${rndm}"  data-id="${rndm}-el" id="${rndm}_" width="600" height="200">
        ${efb_var.text.updateUrbrowser}
    </canvas>
   ${1==previewSate?`<input type="hidden" data-type="esign" data-vid='${rndm}' class="efb  emsFormBuilder_v ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}" id="${rndm}-sig-data" value="Data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==">`:""}
    <div class="efb  mx-1">${desc}</div>
    <div class="efb  mb-3"><button type="button" class="efb  btn ${corner} ${valj_efb[iVJ].button_color} efb-btn-lg mt-1 fs-6 ${disabled}" id="${rndm}_b" onClick="fun_clear_esign_efb('${rndm}')">  <i class="efb  ${valj_efb[iVJ].icon} mx-2 ${"default"!=valj_efb[iVJ].icon_color?valj_efb[iVJ].icon_color:""} " id="${rndm}_icon"></i><span id="${rndm}_button_single_text" class="efb  ${valj_efb[iVJ].icon_color} efb " ${disabled}>${valj_efb[iVJ].button_single_text}</span></button></div>
      `},rating_el_pro_efb=(previewSate,pos,rndm,iVJ)=>{var disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";return` <div class="efb  ${pos[3]} col-sm-12" id ="${rndm}-f">
      <div class="efb  star-efb d-flex justify-content-center ${disabled} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}"> 
                        <input type="radio" id="${rndm}-star5" data-vid='${rndm}' data-type="rating" class="efb "   data-star='star'  name="${rndm}-star-efb" value="5" data-name="star"  data-id="${rndm}-el" ${1!=previewSate?"disabled":""}  ${disabled}>
                        <label id="${rndm}_star5" for="${rndm}-star5"  ${1==previewSate&&0==disabled?`onClick="fun_get_rating_efb('${rndm}',5)"`:""} title="5stars" class="efb  ${valj_efb[iVJ].el_height} star ${disabled}">5 ${efb_var.text.stars}</label>
                        <input type="radio" id="${rndm}-star4" data-vid='${rndm}' data-type="rating" class="efb "  data-star='star' name="${rndm}-star-efb" value="4" data-name="star"  data-id="${rndm}-el" ${1!=previewSate?"disabled":""}  ${disabled}>
                        <label id="${rndm}_star4"  for="${rndm}-star4" ${1==previewSate&&0==disabled?`onClick="fun_get_rating_efb('${rndm}',4)"`:""} title="4stars" class="efb  ${valj_efb[iVJ].el_height} star ${disabled}">4 ${efb_var.text.stars}</label>
                        <input type="radio" id="${rndm}-star3" data-vid='${rndm}' data-type="rating" class="efb "  data-star='star' name="${rndm}-star-efb" data-name="star" value="3"  data-id="${rndm}-el" ${1!=previewSate?"disabled":""}  ${disabled}>
                        <label id="${rndm}_star3" for="${rndm}-star3"  ${1==previewSate&&0==disabled?`onClick="fun_get_rating_efb('${rndm}',3)"`:""} title="3stars" class="efb  ${valj_efb[iVJ].el_height} star ${disabled}">3 ${efb_var.text.stars}</label>
                        <input type="radio" id="${rndm}-star2" data-vid='${rndm}' data-type="rating" class="efb "  data-star='star' data-name="star" name="${rndm}-star-efb" value="2"  data-id="${rndm}-el" ${1!=previewSate?"disabled":""}  ${disabled}>
                        <label id="${rndm}_star2" for="${rndm}-star2" ${1==previewSate&&0==disabled?`onClick="fun_get_rating_efb('${rndm}',2)"`:""} title="2stars" class="efb  ${valj_efb[iVJ].el_height} star ${disabled}">2 ${efb_var.text.stars}</label>
                        <input type="radio" id="${rndm}-star1" data-vid='${rndm}' data-type="rating" class="efb " data-star='star' data-name="star" name="${rndm}-star-efb" value="1"  data-id="${rndm}-el" ${1!=previewSate?"disabled":""}  ${disabled}>
                        <label id="${rndm}_star1" for="${rndm}-star1" ${1==previewSate&&0==disabled?`onClick="fun_get_rating_efb('${rndm}',1)"`:""} title="1star" class="efb   ${valj_efb[iVJ].el_height} star ${disabled}">1 ${efb_var.text.star}</label>
      </div>  
      <input type="hidden" data-vid="${rndm}" data-type="rating" class="efb emsFormBuilder_v ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}" id="${rndm}-stared" >`},pointer10_el_pro_efb=(previewSate,classes,iVJ)=>{var disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";return previewSate=1!=previewSate?"disabled":"",` <div class="efb  NPS flex-row  justify-content-right efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${valj_efb[iVJ].id_}" id="${valj_efb[iVJ].id_}" >     
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="0"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)">0</div>                            
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="1"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)"> 1</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="2"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)"> 2</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="3"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)"> 3</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="4"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)"> 4</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="5"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)"> 5</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="6"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)"> 6</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="7"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)"> 7</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="8"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)"> 8</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="9"  data-id="${valj_efb[iVJ].id_}"  onclick="fun_nps_rating(this)">9</div>
  <div class="efb emsFormBuilder_v rating  btn btn-outline-secondary mx-1 mb-1 ${previewSate} ${disabled}"  data-point="10"  data-id="${valj_efb[iVJ].id_}" onclick="fun_nps_rating(this)">10</div>
  <input type="hidden" data-vid="${valj_efb[iVJ].id_}" data-type="rating"  id="${valj_efb[iVJ].id_}-nps-rating" >
  </div> `},pointer5_el_pro_efb=(previewSate,classes,iVJ)=>{var disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";return previewSate=1!=previewSate?"disabled":"",`   <div class="efb d-flex justify-content-right efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${valj_efb[iVJ].id_}" id="${valj_efb[iVJ].id_}"> 
  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${previewSate} ${disabled}" data-point="1" data-id="${valj_efb[iVJ].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${previewSate} ${disabled}" data-point="2" data-id="${valj_efb[iVJ].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${previewSate} ${disabled}" data-point="3" data-id="${valj_efb[iVJ].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${previewSate} ${disabled}" data-point="4" data-id="${valj_efb[iVJ].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
  <div class="efb btn btn-secondary emsFormBuilder_v  text-white mx-1 ${previewSate} ${disabled}" data-point="5" data-id="${valj_efb[iVJ].id_}" onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
  <input type="hidden" data-vid="${valj_efb[iVJ].id_}" data-type="rating" id="${valj_efb[iVJ].id_}-point-rating">
  </div> `},smartcr_el_pro_efb=(previewSate,classes,iVJ)=>"<h3> Smart</h3> ",countryList_el_pro_efb=(rndm,rndm_1,op_3,op_4,editState)=>{let optn="\x3c!--countreies--\x3e";if(0!=editState){var editState=valj_efb.filter(obj=>obj.parent===rndm),indx_parent=valj_efb.findIndex(x=>x.id_==rndm);for(const i of editState){let value=i.value;i.hasOwnProperty("stylish")&&("2"==i.stylish?value=`<span class="efb">${i.l}</span>`:"3"==i.stylish&&(value=`<span class="efb">${i.n}</span>`)),optn+=`<option value="${value}" id="${i.id_}" data-iso="${i.id_op}" data-id="${i.id_}" data-op="${i.id_}" class="efb ${valj_efb[indx_parent].el_text_color} emsFormBuilder_v efb"  ${valj_efb[indx_parent].value==i.id_||i.hasOwnProperty("id_old")&&valj_efb[indx_parent].value==i.id_old?"selected":""}>${value}</option>`}}else if("object"!=typeof counstries_list_efb)optn=`
            <option value="${efb_var.text.newOption} 1" id="${rndm_1}" data-vid='${rndm}' data-id="${op_3}" data-op="${op_3}" class="efb text-dark efb" >${efb_var.text.newOption} 1</option>
            <option value="${efb_var.text.newOption} 2" id="${rndm_1}" data-vid='${rndm}' data-id="${op_4}" data-op="${op_4}" class="efb text-dark efb" >${efb_var.text.newOption} 2</option>
           `,optionElpush_efb(rndm,efb_var.text.newOption+" 1",rndm_1,op_3,"select"),optionElpush_efb(rndm,efb_var.text.newOption+" 2",rndm_1,op_4,"select");else{let optn="\x3c!-- list of counries --\x3e",count=0;for(var i of counstries_list_efb){var id=rndm_1+(count+=1),op_id=i.s2.toLowerCase();optn+=`<option value="${i.n} (${i.l})" id="${id}" data-vid='${rndm}' data-id="${op_id}" data-op="${op_id}" class="efb text-dark efb fs-6" >${i.n} (${i.l})</option>`,optionElpush_efb(rndm,`${i.n} (${i.l})`,id,op_id,"select")}}return optn},statePrevion_el_pro_efb=(rndm,rndm_1,temp,op_4,editState)=>{let optn="\x3c!--states--\x3e";var optns_obj=valj_efb.filter(obj=>obj.parent===rndm),indx_parent=valj_efb.findIndex(x=>x.id_==rndm),iso_con=valj_efb[indx_parent].country;if(0!=editState)for(const i of optns_obj){let value=i.value;i.hasOwnProperty("stylish")&&("2"==i.stylish?value=`<span class="efb">${i.l}</span>`:"3"==i.stylish&&(value=`<span class="efb">${i.n}</span>`)),optn+=`<option id="${i.id_}" value="${value}" data-iso="${i.s2}" data-isoc='${iso_con}'  data-id="${i.id_}" data-op="${i.id_}" class="efb ${valj_efb[indx_parent].el_text_color} emsFormBuilder_v efb" ${valj_efb[indx_parent].value==i.id_||i.hasOwnProperty("id_old")&&valj_efb[indx_parent].value==i.id_old?"selected":""}>${value}</option>`}else{(state_local=optns_obj).sort();let optn="\x3c!-- list of states --\x3e",count=0;for(let i=0;i<state_local.length;i++){var id=rndm_1+(count+=1);optn+=`<option id="${id}" value="${state_local[i]} 1" data-iso="${i.s2}"  data-isoc='${iso_con}'  data-vid='${rndm}' data-id="${state_local[i]}" data-op="${state_local[i]}" class="efb text-dark efb" ${valj_efb[indx_parent].value==i.id_||valj_efb[indx_parent].value==i.id_old?"selected":""}>${state_local[i]}</option>`,1!=temp&&optionElpush_efb(rndm,state_local[i],id,state_local[i],"select")}}return optn},cityList_el_pro_efb=(rndm,rndm_1,temp,op_4,editState)=>{let optn="\x3c!--states--\x3e";var optns_obj=valj_efb.filter(obj=>obj.parent===rndm),indx_parent=valj_efb.findIndex(x=>x.id_==rndm),stylish=valj_efb[indx_parent].hasOwnProperty("stylish")?valj_efb[indx_parent].stylish:"1";if(0!=editState)for(const i of optns_obj){let value=i.value;i.hasOwnProperty("stylish")&&("2"==stylish?value=`<span class="efb">${i.l}</span>`:"3"==stylish&&(value=`<span class="efb">${i.n}</span>`)),optn+=`<option value="${value}" data-iso="${i.id_}" id="${i.id_}" data-id="${i.id_}"  data-iso='${valj_efb[indx_parent].country}' data-statepov='${valj_efb[indx_parent].statePov}' data-op="${i.id_}" class="efb ${valj_efb[indx_parent].el_text_color} emsFormBuilder_v efb" ${valj_efb[indx_parent].value==i.id_||i.hasOwnProperty("id_old")&&valj_efb[indx_parent].value==i.id_old?"selected":""}>${value}</option>`}else{(state_local=optns_obj).sort();let optn="\x3c!-- list of states --\x3e",count=0;for(let i=0;i<state_local.length;i++){var id=rndm_1+(count+=1);optn+=`<option value="${state_local[i]} 1" data-iso="${i.id_}" id="${id}" data-iso='${valj_efb[indx_parent].country}' data-statepov='${valj_efb[indx_parent].statePov}' data-vid='${rndm}' data-id="${state_local[i]}" data-op="${state_local[i]}" class="efb text-dark efb" ${valj_efb[indx_parent].value==i.id_||valj_efb[indx_parent].value==i.id_old?"selected":""}>${state_local[i]}</option>`,1!=temp&&optionElpush_efb(rndm,state_local[i],id,state_local[i],"select")}}return optn},headning_el_pro_efb=(rndm,pos,iVJ)=>` <div class="efb px-0 mx-0  ${pos[0]} col-sm-12"  id='${rndm}-f'>
    <p  id="${rndm}_"  class="efb  px-0  emsFormBuilder_v  ${valj_efb[iVJ].el_text_color} ${valj_efb[iVJ].el_text_size}   efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-vid='${rndm}' data-id="${rndm}-el" >${valj_efb[iVJ].value}</p>
    </div>`,link_el_pro_efb=(previewSate,pos,rndm,iVJ)=>`<div class="efb ${pos[0]} px-0 mx-0   col-sm-12"  id='${rndm}-f'>
    <a  id="${rndm}_"  target="_blank" class="efb  px-0 btn underline emsFormBuilder_v ${1!=previewSate?"disabled":""}  ${valj_efb[iVJ].el_text_color} ${valj_efb[iVJ].el_text_size} efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-vid='${rndm}' data-id="${rndm}-el" href="${valj_efb[iVJ].href}">${valj_efb[iVJ].value}</a>
    </div>`,yesNi_el_pro_efb=(previewSate,pos,rndm,iVJ)=>{var corner=valj_efb[iVJ].hasOwnProperty("corner")?valj_efb[iVJ].corner:"efb-square",disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";return`<div class="efb ${pos[3]} col-sm-12 efb  ${disabled} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}"  id='${rndm}-f'>
    <div class="efb  btn-group  btn-group-toggle w-100  col-md-12 col-sm-12  ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}" data-toggle="buttons" data-id="${rndm}-id" id="${rndm}_yn">    
    <label for="${rndm}_1" data-lid="${rndm}" data-value="${valj_efb[iVJ].button_1_text}" onClick="yesNoGetEFB('${valj_efb[iVJ].button_1_text}', '${rndm}' ,'${rndm}_b_1')" class="efb  btn ${valj_efb[iVJ].button_color} ${valj_efb[iVJ].el_text_color} ${valj_efb[iVJ].el_height} ${corner} yesno-efb left-efb  ${disabled} ${1!=previewSate?"disabled":""}" id="${rndm}_b_1">
      <input type="radio" name="${rndm}" data-type="switch" class="efb opButtonEfb elEdit emsFormBuilder_v efb" data-vid='${rndm}' data-id="${rndm}-id" id="${rndm}_1" value="${valj_efb[iVJ].button_1_text}"><span id="${rndm}_1_lab">${valj_efb[iVJ].button_1_text}</span></label>
    <span class="efb border-right border border-light efb"></span>
    <label for="${rndm}_2" data-lid="${rndm}" data-value="${valj_efb[iVJ].button_2_text}" onClick="yesNoGetEFB('${valj_efb[iVJ].button_2_text}' ,'${rndm}','${rndm}_b_2')" class="efb  btn ${valj_efb[iVJ].button_color} ${valj_efb[iVJ].el_text_color} ${valj_efb[iVJ].el_height} ${corner} yesno-efb right-efb  ${disabled} ${1!=previewSate?"disabled":""}" id="${rndm}_b_2">
      <input type="radio" name="${rndm}" data-type="switch" class="efb opButtonEfb elEdit emsFormBuilder_v efb" data-vid='${rndm}' data-id="${rndm}-id" id="${rndm}_2" value="${valj_efb[iVJ].button_2_text}"> <span id="${rndm}_2_lab">${valj_efb[iVJ].button_2_text}</span></label>
    </div>`},html_el_pro_efb=(previewSate,rndm,iVJ)=>{let ui="";return ui=valj_efb[iVJ].value.length<2?` 
        <div class="efb col-sm-12 efb"  id='${rndm}-f' data-id="${rndm}-el" data-tag="htmlCode">            
            <div class="efb boxHtml-efb sign-efb efb" id="${rndm}_html">
            <div class="efb noCode-efb m-5 text-center efb" id="${rndm}_noCode">
              ${efb_var.text.noCodeAddedYet} <button type="button" class="efb BtnSideEfb btn efb btn-edit efb btn-sm" id="settingElEFb"
              data-id="${rndm}-id" data-bs-toggle="tooltip" title="${efb_var.text.edit}"
              onclick="show_setting_window_efb('${rndm}-id')">
              <div class="icon-container efb"><i class="efb   bi-gear-wide-connected text-success" id="efbSetting"></i></div></button>${efb_var.text.andAddingHtmlCode}
          </div></div></div>`:(ui=valj_efb[iVJ].value.replace(/@!/g,'"'),`<div ${0==previewSate?`class="efb bg-light" id="${rndm}_html" `:""}> ${ui=valj_efb[iVJ].value.replace(/@efb@nq#/g,"")+"\x3c!--endhtml first --\x3e"} </div>`)},set_dadfile_fun_efb=(id,indx)=>{setTimeout(()=>{create_dadfile_efb(id,indx)},50)},create_dadfile_efb=(id,indx)=>{let dropAreaEfb=document.getElementById(id+"_box"),dragTextEfb=dropAreaEfb.querySelector("h6");var dragbtntEfb=dropAreaEfb.querySelector("button");let dragInptEfb=dropAreaEfb.querySelector("input");dropAreaEfb.classList.remove("active"),dragInptEfb.disabled=!1,dragbtntEfb.onclick=()=>{dragInptEfb.click()},dragInptEfb.addEventListener("change",function(){fileEfb=this.files[0],dropAreaEfb.classList.add("active"),viewfileEfb(id,indx)}),dropAreaEfb.addEventListener("dragover",event=>{event.preventDefault(),dropAreaEfb.classList.add("active"),dragTextEfb.textContent="Release to Upload File"}),dropAreaEfb.addEventListener("dragleave",()=>{var n=valj_efb[indx].file,n=efb_var.text[n];dragTextEfb.textContent=efb_var.text.dragAndDropA+" "+n}),dropAreaEfb.addEventListener("drop",event=>{event.preventDefault(),fileEfb=event.dataTransfer.files[0],document.getElementById(id+"_").files=event.dataTransfer.files,dropAreaEfb.classList.add("active"),viewfileEfb(id,indx),valid_file_emsFormBuilder(id,"msg")})},reply_attach_efb=(id,indx)=>{var id=reply_upload_efb(id),lenV=id.length/20+10,l=document.getElementById("replay_section__emsFormBuilder");l&&(l.innerHTML+=id),setTimeout(()=>{document.getElementById("attach_efb");var dragInptEfb=document.getElementById("resp_file_efb_");1==pro_efb&&dragInptEfb&&dragInptEfb.addEventListener("change",function(){fileEfb=this.files[0],viewfileReplyEfb("resp_file_efb_",indx)})},lenV)},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(callback){window.setTimeout(callback,1e3/60)};let map_efb,markers_maps_efb=[],mark_maps_efb=[];function initMap(disabled){setTimeout(function(){var idx=valj_efb.findIndex(x=>"maps"==x.type),lat=-1!=idx&&valj_efb[idx].lat?Number(valj_efb[idx].lat):49.24803870604257,lon=-1!=idx&&valj_efb[idx].lng?Number(valj_efb[idx].lng):-123.10512829684463;const mark=-1!=idx?Number(valj_efb[idx].mark):1;var zoom=-1!=idx&&valj_efb[idx].zoom&&""!=valj_efb[idx].zoom?Number(valj_efb[idx].zoom):10,lat={lat:lat,lng:lon};if("undefined"==typeof google)return alert_message_efb(efb_var.text.error,googleMapsNOkEfb(),20,"danger"),0;if("undefined"!=typeof google&&google.hasOwnProperty("maps")&&(map_efb=new google.maps.Map(document.getElementById(valj_efb[idx].id_+"-map"),{zoom:zoom,center:lat,mapTypeId:"roadmap"})),0!=mark&&-1!=mark)disabled||(map_efb.addListener("click",event=>{var latlng=event.latLng.toJSON();mark_maps_efb.length<mark&&(mark_maps_efb.push(latlng),addMarker(event.latLng))}),document.getElementById("delete-markers_maps_efb-efb")&&document.getElementById("delete-markers_maps_efb-efb").addEventListener("click",deletemarkers_maps_efb_efb));else if(-1==mark){let nn=0;for(const mrk of marker_maps_efb){var lab="0ABCDEFGHIJKLMNOPQRSTUVWXYZ"[nn+=1],position={lat:mrk.lat,lng:mrk.lng},position=new google.maps.Marker({position:position,label:lab,map_efb:map_efb});markers_maps_efb.push(position)}}else addMarker(lat)},1e3)}function addMarker(position){var idx=valj_efb.findIndex(x=>"maps"==x.type),idxm=mark_maps_efb.length,idxm=-1!==idx&&valj_efb[idx].mark<2?"":"0ABCDEFGHIJKLMNOPQRSTUVWXYZ"[idxm%"0ABCDEFGHIJKLMNOPQRSTUVWXYZ".length],position=new google.maps.Marker({position:position,label:idxm,map_efb:map_efb});markers_maps_efb.push(position),"undefined"!=typeof sendBack_emsFormBuilder_pub&&(JSON.stringify(mark_maps_efb),idxm=[{id_:valj_efb[idx].id_,name:valj_efb[idx].name,amount:valj_efb[idx].amount,type:"maps",value:mark_maps_efb,session:sessionPub_emsFormBuilder}],fun_sendBack_emsFormBuilder(idxm[0]))}function setMapOnAll(map_efb){for(let i=0;i<markers_maps_efb.length;i++)markers_maps_efb[i].setMap(map_efb)}function hidemarkers_maps_efb(){setMapOnAll(null)}function showmarkers_maps_efb(){setMapOnAll(map_efb)}function deletemarkers_maps_efb_efb(){var indx;hidemarkers_maps_efb(),markers_maps_efb=[],mark_maps_efb=[],"undefined"!=typeof sendBack_emsFormBuilder_pub&&-1!=(indx=sendBack_emsFormBuilder_pub.findIndex(x=>"maps"==x.type))&&sendBack_emsFormBuilder_pub.splice(indx,1)}function closed_resp_emsFormBuilder(msg_id){var body=`<div class="efb   mb-3"><div class="efb  clearfix">${0==stock_state_efb?efb_var.text.clsdrspnsM:efb_var.text.clsdrspnsMo}</div></div>`,body=(show_modal_efb(body,efb_var.text.close,"efb bi-x-octagon-fill mx-2","deleteBox"),document.getElementById("modalConfirmBtnEfb"));state_modal_show_efb(1),body.addEventListener("click",e=>{close_resp_efb(msg_id,stock_state_efb),activeEl_efb=0,state_modal_show_efb(0)}),window.scrollTo({top:0,behavior:"smooth"})}function fun_point_rating(el){const id=el.dataset.id;for(var l of document.querySelectorAll(`[data-id="${id}"]`))Number(l.dataset.point)<=Number(el.dataset.point)?l.className=btnChangerEfb(l.className,pub_bg_button_color_efb):l.className=btnChangerEfb(l.className,"btn-secondary");if(document.getElementById(id+"-point-rating").value=el.dataset.point,"run"==state_efb){const v=valj_efb.find(x=>x.id_==id);if("r_matrix"==v.type){var o=[{id_ob:v.id_,name:v.value,id_:v.parent,amount:v.amount,type:v.type,value:el.dataset.point,session:sessionPub_emsFormBuilder}];fun_sendBack_emsFormBuilder(o[0]);const l=valj_efb.filter(obj=>obj.parent==v.parent);1==valj_efb.find(x=>x.id_==v.parent).required&&setTimeout(()=>{var o_r=sendBack_emsFormBuilder_pub.filter(obj=>obj.parent==v.parent);l.length,o_r.length},500)}else{const o=[{id_:v.id_,name:v.name,amount:v.amount,type:v.type,value:el.dataset.point,session:sessionPub_emsFormBuilder}];fun_sendBack_emsFormBuilder(o[0])}}}function fun_nps_rating(el){const id=el.dataset.id;el.className=btnChangerEfb(el.className,pub_bg_button_color_efb);for(var l of document.querySelectorAll(`[data-id="${id}"]`))Number(l.dataset.point)!=Number(el.dataset.point)&&(l.className=btnChangerEfb(l.className,"btn-outline-secondary"));var v;document.getElementById(id+"-nps-rating").value=el.dataset.point,"run"==state_efb&&(v=[{id_:(v=valj_efb.find(x=>x.id_==id)).id_,name:v.name,amount:v.amount,type:v.type,value:el.dataset.point,session:sessionPub_emsFormBuilder}],fun_sendBack_emsFormBuilder(v[0]))}function fun_switch_efb(el){if("run"==state_efb){const v=valj_efb.find(x=>x.id_==el.dataset.vid);setTimeout(()=>{var o=[{id_:v.id_,name:v.name,amount:v.amount,type:v.type,value:"1",session:sessionPub_emsFormBuilder}];0==el.classList.contains("active")&&(o[0].value="0"),fun_sendBack_emsFormBuilder(o[0])},100)}}function create_intlTelInput_efb(rndm,iVJ,previewSate,corner){var disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";return load_intlTelInput_efb(rndm,iVJ),`
  <input type="phone" class="efb  input-efb intlPhone px-2 mb-0 emsFormBuilder_v form-control ${valj_efb[iVJ].el_border_color}  ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_text_color} ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-id="${rndm}-el" data-vid='${rndm}' id="${rndm}_"  ${0<valj_efb[iVJ].value.length?value=`"${valj_efb[iVJ].value}"`:""} ${1!=previewSate?"readonly":""} ${disabled}>
  <input type="phone" class="efb  input-efb intlPhone px-2 mb-0 emsFormBuilder_v form-control ${valj_efb[iVJ].el_border_color}  ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_text_color} ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  efbField d-none efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-id="${rndm}-el" data-vid='${rndm}' id="${rndm}-code" placeholder="verify"  ${0<valj_efb[iVJ].value.length?value=`"${valj_efb[iVJ].value}"`:""} ${1!=previewSate?"readonly":""} ${disabled}>
  <button id="${rndm}-btn" type="submit" class="efb d-none">Submit</button>
 `}function terms_el_pro_efb(previewSate,rndm,iVJ){var disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";return`<div class="efb  form-check">
  <textarea class="efb  form-control ${valj_efb[iVJ].el_border_color} ${valj_efb[iVJ].el_height} ${valj_efb[iVJ].el_text_color} ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-id="${rndm}-el" data-vid='${rndm}' id="${rndm}_" ${1!=previewSate?"readonly":""} ${disabled}>${valj_efb[iVJ].value_text}</textarea>
  <input class="efb  form-check-input ${valj_efb[iVJ].el_border_color} ${valj_efb[iVJ].el_height} ${valj_efb[iVJ].el_text_color} ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-id="${rndm}-el" data-vid='${rndm}' id="${rndm}_" type="checkbox" ${0<valj_efb[iVJ].value.length?value=`"${valj_efb[iVJ].value}"`:""} ${1!=previewSate?"readonly":""} ${disabled}>
  <label class="efb  form-check-label" for="${rndm}_">${valj_efb[iVJ].value}</label>
  </div>`}async function callFetchCitiesEfb(idField,iso2_country,iso2_statePove,indx_state,fieldType){let state_el=document.getElementById(idField);null!=state_el&&(state_el.innerHTML="",state_el.innerHTML=`<option value="">${efb_var.text.loading}</option>`,state_el.classList.add("is-loading"),state_el.disabled=!0);var result=await fetch_json_from_url_efb(`https://cdn.jsdelivr.net/gh/hassantafreshi/Json-List-of-countries-states-and-cities-in-the-world@main/json/cites/${iso2_country.toLowerCase()}/${iso2_statePove.toLowerCase()}.json`);if(0!=result.s){let opt=`<option selected disabled>${efb_var.text.nothingSelected}</option>`;for(let i=0;i<valj_efb.length;i++)valj_efb[i].hasOwnProperty("parent")&&valj_efb[i].parent==valj_efb[indx_state].id_&&(valj_efb.splice(i,1),i--);for(const key in result.r){var n=efb_remove_forbidden_chrs(result.r[key].n),l=efb_remove_forbidden_chrs(result.r[key].l);let value=result.r[key].n==result.r[key].l||result.r[key].l.length<1?n:l+` (${n})`;var id_op=result.r[key].n.replaceAll(" ","_").toLowerCase(),id_op=efb_remove_forbidden_chrs(id_op).replaceAll(" ","_"),rnd=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),id=efb_remove_forbidden_chrs(result.r[key].n.toLowerCase()).replaceAll(" ","_");valj_efb[indx_state].hasOwnProperty("stylish")&&1<Number(valj_efb[indx_state].stylish)&&(value=2==Number(valj_efb[indx_state].stylish)&&1<l.length?l:n),"pubSelect"==fieldType?valj_efb.push({id_:id+"-efb"+rnd,dataId:id+"-efb"+rnd+"-id",parent:valj_efb[indx_state].id_,type:"option",value:value,s2:id,id_op:id_op,step:valj_efb[indx_state].step,amount:valj_efb[indx_state].amount,n:n,l:l}):"getCitiesEfb"==fieldType&&(opt+=`<option value="${id.toLowerCase()}" ${id.toLowerCase()==valj_efb[indx_state].statePov.toLowerCase()?"selected":""}>${value}</option>`)}return"pubSelect"==fieldType&&(Object.assign(valj_efb[indx_state],{linked:!0}),opt+=statePrevion_el_pro_efb(valj_efb[indx_state].id_,"","","",!0)),null!=state_el?(state_el.innerHTML="",state_el.innerHTML=opt,state_el.classList.remove("is-loading"),state_el.disabled=!1):setTimeout(()=>{(state_el=document.getElementById(idField)).innerHTML=opt,state_el.classList.remove("is-loading")},2e3),null!=state_el?result:opt}alert_message_efb("",efb_var.text.offlineSend,5,"danger")}async function callFetchStatesPovEfb(idField,iso2_country,indx_state,fieldType){let state_el=document.getElementById(idField);null!=state_el&&(state_el.innerHTML=`<option value="">${efb_var.text.loading}</option>`,state_el.classList.add("is-loading"),state_el.disabled=!0);var result=await fetch_json_from_url_efb(`https://cdn.jsdelivr.net/gh/hassantafreshi/Json-List-of-countries-states-and-cities-in-the-world@main/json/states/${iso2_country.toLowerCase()}.json`);if(0!=result.s){let opt=`<option selected disabled>${efb_var.text.nothingSelected}</option>`;for(const key in result.r){var n=efb_remove_forbidden_chrs(result.r[key].n),l=efb_remove_forbidden_chrs(result.r[key].l);let value=result.r[key].n==result.r[key].l||result.r[key].l.length<1?n:l+` (${n})`;var id_op=result.r[key].n.replaceAll(" ","_").toLowerCase(),id_op=efb_remove_forbidden_chrs(id_op).replaceAll(" ","_"),rnd=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),id=efb_remove_forbidden_chrs(result.r[key].s.toLowerCase()).replaceAll(" ","_");valj_efb[indx_state].hasOwnProperty("stylish")&&1<Number(valj_efb[indx_state].stylish)&&(value=2==Number(valj_efb[indx_state].stylish)&&1<l.length?l:n),"pubSelect"==fieldType?valj_efb.push({id_:id+"-efb"+rnd,dataId:id+"-efb"+rnd+"-id",parent:valj_efb[indx_state].id_,type:"option",value:value,s2:id,id_op:id_op,step:valj_efb[indx_state].step,amount:valj_efb[indx_state].amount,n:n,l:l}):"getStatesPovEfb"==fieldType&&(opt+=`<option value="${id.toLowerCase()}" ${id.toLowerCase()==valj_efb[indx_state].statePov.toLowerCase()?"selected":""}>${value}</option>`)}return"pubSelect"==fieldType&&(Object.assign(valj_efb[indx_state],{linked:!0}),opt+=statePrevion_el_pro_efb(valj_efb[indx_state].id_,"","","",!0)),null!=state_el?(state_el.innerHTML=opt,state_el.classList.remove("is-loading"),state_el.disabled=!1):setTimeout(()=>{(state_el=document.getElementById(idField)).innerHTML=opt,state_el.classList.remove("is-loading")},2e3),null!=state_el?result:opt}alert_message_efb("",efb_var.text.offlineSend,5,"danger")}googleMapsNOkEfb=()=>`<div class="efb  boxHtml-efb sign-efb h-100" >
         <div class="efb  noCode-efb m-5 text-center text-light">
         <button type="button" class="efb  btn btn-edit btn-sm" data-bs-toggle="tooltip" title="${efb_var.text.howToAddGoogleMap}" onclick="open_whiteStudio_efb('mapErorr')">
          <i class="efb  bi-question-lg text-pinkEfb"></i></button> 
          <p class="efb fs-6">${efb_var.text.aPIkeyGoogleMapsError}</p> 
       </div></div>`,fun_addProgessiveEl_efb=(id,state)=>{var newEl=document.createElement("div"),elId=id+"-prG",state=(newEl.setAttribute("id",elId),newEl.className="efb mt-3 mx-1",0==state?"view-efb":"replay_section__emsFormBuilder");null==document.getElementById(id+"-prG")&&document.getElementById(state).append(newEl),document.getElementById(elId).innerHTML=`<div class="efb d-flex justify-content-center"><div class="efb progress w-100" id="${id}-prA">
  <div id="${id}-prB" class="efb  text-light text-center btn-pinkEfb progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:1%;">
        1%
        </div>
    </div></div>`},fun_removeProgessiveEl_efb=id=>{document.getElementById(id+"-prG").remove()},reply_upload_efb=msg_id=>{let btnC="\x3c!--efb.app--\x3e";return 1==pro_efb?("panel"==page_state_efb&&(btnC=`<div class="efb col fs-5 h-d-efb pointer-efb text-darkb d-flex justify-content-end">
       <button type="button" class="efb btn mt-1 efb ${1==stock_state_efb?"btn-outline-success":"btn-outline-pink"}" onclick="closed_resp_emsFormBuilder(${msg_id})" data-state="${1==stock_state_efb?1:0}" id="respStateEfb" disabled>
           ${1==stock_state_efb?efb_var.text.open:efb_var.text.close}
      </button></div>`),setting_emsFormBuilder.hasOwnProperty("dsupfile")&&0==setting_emsFormBuilder.dsupfile&&0==efb_var.hasOwnProperty("setting")?"":`<div class="efb form-check">
      <div class="efb btn btn-light text-dark" id="attach_efb">
      <i class="bi bi-paperclip"></i><span id="name_attach_efb">${efb_var.text.file}</span>
      <input type="file" id="resp_file_efb_" name="file"  data-id="${msg_id}" >
      </div>
      ${btnC}
    </div>`):(msg_id=`<a type="button" class="efb pro-v-btn" data-bs-toggle="tooltip" data-bs-placement="top" title="${efb_var.text.fieldAvailableInProversion}" data-original-title="${efb_var.text.fieldAvailableInProversion}" onclick="pro_show_efb(1)"><i class="efb  bi-gem text-light" ></i></a>`,"panel"==page_state_efb&&(btnC=`<div class="efb col fs-5 h-d-efb pointer-efb text-darkb d-flex justify-content-end">
      <button type="button" class="efb btn mt-1 efb ${1==stock_state_efb?"btn-outline-success":"btn-outline-pink"} "id="respStateEfb">
      <i class="efb  bi-x-lg mx-1 efb mobile-text">${1==stock_state_efb?efb_var.text.open:efb_var.text.close}</i>
      ${msg_id}
     </button></div>`),`<div class="efb form-check">
      <div class="efb btn btn-light text-dark" id="attach_efb" >
      <i class="bi bi-paperclip"></i><span id="name_attach_efb">${efb_var.text.file}</span>
        ${msg_id}
      </div>
       ${btnC}
    </div>`)},close_resp_efb=(id,s)=>{s=1==s?[{id_:"message",name:"message",type:"opened",amount:0,value:efb_var.text.clsdrspo,by:ajax_object_efm.user_name,session:sessionPub_emsFormBuilder}]:[{id_:"message",name:"message",type:"closed",amount:0,value:efb_var.text.clsdrspn,by:ajax_object_efm.user_name,session:sessionPub_emsFormBuilder}];sendBack_emsFormBuilder_pub=s,fun_send_replayMessage_ajax_emsFormBuilder(sendBack_emsFormBuilder_pub,id)},load_intlTelInput_efb=(rndm,iVJ)=>{const onlyCountries=valj_efb[iVJ].hasOwnProperty("c_c")&&0<valj_efb[iVJ].c_c.length?valj_efb[iVJ].c_c:"";setTimeout(()=>{const iti=window.intlTelInput(document.getElementById(rndm+"_"),{onlyCountries:onlyCountries,autoHideDialCode:!0,placeholderNumberType:"MOBILE",utilsScript:efb_var.images.utilsJs});document.getElementById(rndm+"_").addEventListener("blur",function(){var mobile_no,errorMap=[efb_var.text.cpnnc,efb_var.text.icc,efb_var.text.cpnts,efb_var.text.cpntl,efb_var.text.cpnnc];document.getElementById(rndm+"_").classList.remove("border-danger"),document.getElementById(rndm+"_").classList.remove("border-success"),document.getElementById(rndm+"_-message").innerHTML="",document.getElementById(rndm+"_-message").classList.remove("d-block"),document.getElementById(rndm+"_-message").classList.add("d-none"),document.getElementById(rndm+"_").value.trim()&&(iti.isValidNumber()?(document.getElementById(rndm+"_").classList.add("border-success"),mobile_no=document.getElementById(rndm+"_").value.replace(/^0+/,""),mobile_no="+"+iti.s.dialCode+mobile_no,fun_sendBack_emsFormBuilder({id_:valj_efb[iVJ].id_,name:valj_efb[iVJ].name,id_ob:valj_efb[iVJ].id_,amount:valj_efb[iVJ].amount,type:valj_efb[iVJ].type,value:mobile_no,session:sessionPub_emsFormBuilder})):(document.getElementById(rndm+"_").classList.add("border-danger"),mobile_no=errorMap[mobile_no=iti.getValidationError()]||errorMap[0],document.getElementById(rndm+"_-message").classList.remove("d-none"),document.getElementById(rndm+"_-message").classList.add("d-block"),document.getElementById(rndm+"_-message").innerHTML=mobile_no,-1!=(errorMap=sendBack_emsFormBuilder_pub.findIndex(x=>x.id_==valj_efb[iVJ].id_))&&sendBack_emsFormBuilder_pub.splice(errorMap,1)))})},800)},fun_imgRadio_efb=(id,link,row)=>{var value=row.hasOwnProperty("value")?row.value:efb_var.text.newOption??"",sub_value=row.hasOwnProperty("sub_value")?row.sub_value:efb_var.text.sampleDescription??"";return link=0==link.includes("http")?efb_var.images.head:row.src,`
    <label class="efb  " id="${id}_lab" for="${id}">
    <div class="efb card col-md-3 mx-0 my-1 w-100" style="">
    <img src="${link=link.replace(/(http:@efb@)+/g,"http://").replace(/(https:@efb@)+/g,"https://").replace(/(@efb@)+/g,"/")}" alt="${value}" style="width: 100%"  id="${id}_img">
    <div class="efb card-body">
        <h5 class="efb card-title text-dark" id="${id}_value">${value}</h5>
        <p class="efb card-text" id="${id}_value_sub">${sub_value}</p>    
    </div>
    </div>
    </label>`},add_new_imgRadio_efb=(idin,value,id_ob,tag,parentsID)=>{var idx=valj_efb.findIndex(x=>x.id_==id_ob),idx=fun_imgRadio_efb(id_ob,"null",valj_efb[idx]);return`<div class="efb  form-check imgRadio col-md-3" data-parent="${parentsID}" data-id="${id_ob}"  id="${id_ob}-v">
  <input class="efb  form-check-input " type="radio" name="${parentsID}"  value="${value}" id="${idin}" data-id="${idin}-id" data-op="${idin}" disabled>
  ${idx}
  </div>`},fun_check_link_city_efb=(iso2_country,iso2_statePove,indx)=>{let indx_state=-1;for(let i=indx+1;i<valj_efb.length;i++)if("option"!=valj_efb[i].type){if(("city"==valj_efb[i].type||"cityList"==valj_efb[i].type)&&valj_efb[i].amount>valj_efb[indx].amount){indx_state=i;break}return}if(-1!=indx_state){Object.assign(valj_efb[indx_state],{country:iso2_country,statePov:iso2_statePove});for(let i=indx_state;i<valj_efb.length;i++)valj_efb[i].hasOwnProperty("parent")&&valj_efb[i].parent==valj_efb[indx_state].id_&&(valj_efb.splice(i,1),i--);callFetchCitiesEfb(valj_efb[indx_state].id_+"_options",iso2_country,iso2_statePove,indx_state,"pubSelect")}},fun_check_link_state_efb=(iso2_country,indx)=>{let indx_state=-1;for(let i=indx+1;i<valj_efb.length;i++)if("option"!=valj_efb[i].type){if(("statePro"==valj_efb[i].type||"stateProvince"==valj_efb[i].type)&&valj_efb[i].amount>valj_efb[indx].amount){indx_state=i;break}return}document.getElementById(valj_efb[indx_state].id_+"_options");valj_efb[indx_state].country=iso2_country;for(let i=0;i<valj_efb.length;i++)valj_efb[i].hasOwnProperty("parent")&&valj_efb[i].parent==valj_efb[indx_state].id_&&(valj_efb.splice(i,1),i--);callFetchStatesPovEfb(valj_efb[indx_state].id_+"_options",iso2_country,indx_state,"pubSelect")};