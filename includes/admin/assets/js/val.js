

const currency_efb = ["USD (United State dollar)","AED (United Arab Emirates dirham, درهم إماراتي)","AFN (Afghan afghani)","ALL (Albania Lek)","AMD (Armenian dram, Հայկական Դրամ)","ANG (Netherlands Antillean guilder, Antilliaanse gulden)","AOA (Angolan kwanza)","ARS (Argentine peso,Peso argentino)","AUD (Australian dollar)","AWG (Aruban florin, Arubaanse florin)","AZN (Azerbaijani manat, Azərbaycan manatı)","BAM (Bosnia and Herzegovina convertible mark, Конвертибилна марка)","BBD (Barbadian dollar)","BDT (Bangladeshi taka, টাকা)","BGN (Bulgarian lev, Български лев)","BIF (franc burundais)","BMD (Bermudian dollar)","BND (Brunei dollar, ringgit Brunei)","BOB  (Bolivian boliviano, boliviano)","BRL  (Brazilian real, Real brasileiro)","BSD (Bahamian dollar)","BWP (Botswana pula)","BYN (Belarusian ruble, беларускі рубель)","BZD (Belize dollar)","CAD (Canadian dollar, dollar canadien)","CDF (Congolese franc, franc congolais)","CHF (Swiss franc)","CLP  (Chilean peso, Peso chileno)","CNY (Renminbi, 人民币)","COP  (Colombian peso, peso colombiano)","CRC  (Costa Rican colón, colón costarricense)","CVE  (Cape Verdean escudo, escudo cabo-verdiano)","CZK (Czech koruna, koruna česká)","DJF  (Djiboutian franc, الفرنك الجيبوتي)","DKK (Danish krone, dansk krone)","DOP (Dominican peso, peso dominicano)","DZD (Algerian dinar, دينار جزائري)","EGP (Egyptian pound, جنيه مصرى)","ETB (Ethiopian birr)","EUR (Euro)","FJD (Fijian dollar)","FKP  (Falkland Islands pound)","GBP (Pound sterling)","GEL (Georgian lari,  ქართული ლარი)","GIP (Gibraltar pound)","GMD (Gambian dalasi)","GNF  (Guinean franc, franc guinéen)","GTQ  (Guatemalan quetzal,  quetzal guatemalteco)","GYD (Guyanese dollar)","HKD (Hong Kong dollar, 港元)","HNL  (Honduran lempira, lempira hondureño)","HRK (Croatian kuna, hrvatska kuna)","HTG (Haitian gourde, gourde haïtienne)","HUF (Hungarian forint, Magyar forint)","IDR (Indonesian rupiah)","ILS (Israeli new shekel, שקל חדש)","INR (Indian rupee)","ISK (Icelandic krona, króna)","JMD (Jamaican dollar)","JPY (Japanese yen, 日本円)","KES (Kenyan shilling, Kenyan shilling)","KGS (Kyrgyzstani som, Кыргыз сому)","KHR (Cambodian riel, រៀលកម្ពុជា/រៀលខ្មែរ)","KMF (Comorian franc)","KRW (South Korean won, 대한민국 원)","KYD (Cayman Islands dollar)","KZT (Kazakhstani tenge, Қазақстан теңгесі)","LAK (Lao kip,ເງີນກີບລາວ)","LBP (Lebanese pound, Livre libanaise)","LKR (Sri Lankan rupee, ශ්‍රී ලංකා රුපියල්)","LRD (Liberian dollar)","LSL (Lesotho loti)","MAD (Moroccan dirham, ⴰⴷⵔⵀⵎ ⵏ ⵍⵎⵖⵔⵉⴱ)","MDL (Moldovan leu, leu moldovenesc)","MGA (Malagasy ariary,ariary malgache)","MKD (Macedonian denar,денар)","MMK (Myanmar kyat)","MNT (Mongolian tögrög, Монгол төгрөг)","MOP (Macanese pataca)","MRO (Mauritanian ouguiya, أوقية موريتانية)","MUR (Mauritian rupee, Roupie mauricienne)","MVR (Maldivian rufiyaa)","MWK (Malawian kwacha)","MXN (Mexican peso, Peso Mexicano)","MYR (Malaysian ringgit, Ringgit Malaysia)","MZN (Mozambican metical, Metical moçambicano)","NAD (Namibian dollar)","NGN (Nigerian naira)","NIO (Nicaraguan córdoba, córdoba nicaragüense)","NOK (Norwegian krone, norsk krone)","NPR (Nepalese rupee, रुपैयाँ)","NZD (New Zealand dollar)","PAB (Panamanian balboa, Balboa panameño)","PEN (Peruvian sol, sol peruano)","PGK (Papua New Guinean kina)","PHP (Philippine peso, Piso ng Pilipinas)","PKR (Pakistani rupee)","PLN (Polish złoty, Polski złoty)","PYG (Paraguayan guaraní, Guaraní paraguayo)","QAR (Qatari riyal, ريال قطري)","RON (Romanian leu, Leu românesc)","RSD (Serbian dinar, Cрпски динар)","RUB (Russian ruble, Российский рубль)","RWF (Rwandan franc, franc rwandais)","SAR (Saudi riyalSaudi riyal, ريال سعودي)","SBD (Solomon Islands dollar)","SCR (Seychellois rupee, roupie seychelloise)","SEK (Swedish krona, svensk krona )","SGD (Singapore dollar, Dolar Singapura)","SHP (Saint Helena pound)","SLL (Sierra Leonean leone)","SOS (Somali shilling, Shilin Soomaali)","SRD (Surinamese, Surinamese )","STD (São Tomé and Príncipe dobra, dobra são-tomense)","SZL (Swazi lilangeni)","THB (Thai baht, บาทไทย)","TJS (Tajikistani somoni, Сомонӣ)","TOP (Tonga Pa'anga)","TRY (Turkish New Lira)","TTD (Trinidad/Tobago Dollar)","TWD (Taiwan Dollar)","TZS (Tanzania Shilling)","UAH (Ukraine Hryvnia)","UGX (Uganda Shilling)","UYU (Uruguay Peso)","UZS (Uzbekistani soʻm, Oʻzbek soʻmi)","VND (Vietnam Dong)","VUV (Vanuatu Vatu)","WST (Samoa Tala)","XAF (CFA Franc BEAC)","XCD (East Caribbean Dollar)","XOF (CFA Franc BCEAO)","XPF (CFP Franc)","YER (Yemen Rial)","ZAR (South Africa Rand)","ZMW (Zambian kwacha)"];
const fields_efb = [
  { name: efb_var.text.text, icon: 'bi-file-earmark-text', id: 'text', pro: false,  tag:'basic all'},
  { name: efb_var.text.name, icon: 'bi-person-circle', id: 'name', pro: false },
  { name: efb_var.text.password, icon: 'bi-lock', id: 'password', pro: false, tag:'basic all' },
  { name: efb_var.text.email, icon: 'bi-envelope', id: 'email', pro: false,  tag:'basic all' },
  { name: efb_var.text.number, icon: 'bi-pause', id: 'number', pro: false,  tag:'basic all' },
  /* { name: efb_var.text.address, icon: 'bi-geo-alt', id: 'address', pro: false, tag:'advance all' }, */
  { name: efb_var.text.textarea, icon: 'bi-card-text', id: 'textarea', pro: false, tag:'basic all' },
  { name: efb_var.text.step, icon: 'bi-file', id: 'steps', pro: false, tag:'advance all' }, 
  { name: efb_var.text.checkbox, icon: 'bi-check-square', id: 'checkbox', pro: false, tag:'basic all'},
  { name: efb_var.text.radiobutton, icon: 'bi-record-circle', id: 'radio', pro: false, tag:'basic all' },
  { name: efb_var.text.select, icon: 'bi-check2', id: 'select', pro: false , tag:'basic all'},
  { name: efb_var.text.multiselect, icon: 'bi-check-all', id: 'multiselect', pro: false, tag:'advance all' }, 
  { name: efb_var.text.payCheckbox, icon: 'bi-basket2', id: 'payCheckbox', pro: true, tag:'payment all' },
  { name: efb_var.text.payRadio, icon: 'bi-basket3', id: 'payRadio', pro: true, tag:'payment all' },
  { name: efb_var.text.paySelect, icon: 'bi-bag-check', id: 'paySelect', pro: true, tag:'payment all' },
  { name: efb_var.text.payMultiselect, icon: 'bi-bag-plus', id: 'payMultiselect', pro: true, tag:'payment all' }, 
  { name: efb_var.text.stripe, icon: 'bi-credit-card', id: 'stripe', pro: true, tag:'payment all' },
  { name: efb_var.text.dadfile, icon: 'bi-plus-square-dotted', id: 'dadfile', pro: true, tag:'advance all' },
  { name: efb_var.text.file, icon: 'bi-file-earmark-plus', id: 'file', pro: false, tag:'basic all' },
  { name: efb_var.text.tel, icon: 'bi-telephone', id: 'tel', pro: false, tag:'basic all' },
 // { name: efb_var.text.mobile, icon: 'bi-phone', id: 'mobile', pro: true, tag:'advance all' },
  { name: efb_var.text.url, icon: 'bi-link-45deg', id: 'url', pro: false, tag:'basic all' },
  { name: efb_var.text.range, icon: 'bi-arrow-left-right', id: 'range', pro: false, tag:'basic all' },
  { name: efb_var.text.heading, icon: 'bi-fonts', id: 'heading', pro: true, tag:'advance all' },
  { name: efb_var.text.ddate, icon: 'bi-calendar-date', id: 'date', pro: false, tag:'basic all' },
  { name: efb_var.text.conturyList, icon: 'bi-flag', id: 'conturyList', pro: true, tag:'advance all' },
  { name: efb_var.text.stateProvince, icon: 'bi-triangle-fill', id: 'stateProvince', pro: true, tag:'advance all' },
  { name: efb_var.text.esign, icon: 'bi-pen', id: 'esign', pro: true, tag:'advance all' }, 
  { name: efb_var.text.switch, icon: 'bi-toggle2-on', id: 'switch', pro: true, tag:'advance all' },
  { name: efb_var.text.locationPicker, icon: 'bi-pin-map', id: 'maps', pro: true, tag:'advance all' },
  { name: efb_var.text.color, icon: 'bi-palette', id: 'color', pro: true, tag:'basic all' },
  { name: efb_var.text.rating, icon: 'bi-star', id: 'rating', pro: true, tag:'advance all' },
  { name: efb_var.text.yesNo, icon: 'bi-hand-index', id: 'yesNo', pro: true, tag:'advance all' },
  { name: efb_var.text.link, icon: 'bi-link-45deg', id: 'link', pro: true, tag:'advance all' },
/*   { name: efb_var.text.product, icon: 'bi-bag-check-fill', id: 'product', pro: true, tag:'payment all' },
  { name: efb_var.text.pricingTable, icon: 'bi-tags', id: 'pricingTable', pro: true, tag:'payment all' }, */
  //{ name: efb_var.text.terms, icon: 'bi-shield-check', id: 'terms', pro: true, tag:'advance all' },
  { name: efb_var.text.htmlCode, icon: 'bi-code-square', id: 'html', pro: true, tag:'advance all' },
  { name: efb_var.text.persiaPayment, icon: 'bi-credit-card-2-front', id: 'persiaPay', pro: true, tag:'payment all' },
]



function show_setting_window_efb(idset) {
  //console.log('show_setting_window_efb');
  if(document.getElementById('sideBoxEfb').classList.contains('show')){
    sideMenuEfb(0);
    //document.getElementById(`btnSetting-${activeEl_efb}`).classList.toggle('d-none');
    return};
    //console.log('show_setting_window_efb',idset,valj_efb)
    state_view_efb=1;
    document.getElementById('sideMenuConEfb').innerHTML=loading_messge_efb();
    sideMenuEfb(1)
    // document.getElementById('sideBoxEfb').classList.add('show');
     //console.log('body',body);
    let el = idset != "formSet" ? document.querySelector(`[data-id="${idset}"]`) : { dataset: { id: 'formSet', tag: 'formSet' } }
    let body = ``;
    //const bodySetting = document.getElementById("settingModalEfb-body");
    const indx = idset != "button_group" && idset != "formSet" ? valj_efb.findIndex(x => x.dataId == idset) : 0;
    
    if (indx == 0 && idset != "formSet") el = document.getElementById(`f_btn_send_efb`);
   
    const labelEls = `<label for="labelEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.label}<span class="efb  mx-1 efb text-danger">*</span></label>
    <input type="text"  data-id="${idset}" class="efb  elEdit form-control text-muted border-d efb-rounded h-d-efb mb-1"  placeholder="${efb_var.text.label}" id="labelEl" required value="${valj_efb[indx].name ? valj_efb[indx].name : ''}">`
  
    const desEls = `<label for="desEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.description}</label>
    <input type="text" data-id="${idset}" class="efb elEdit form-control text-muted efb border-d efb-rounded h-d-efb mb-1" placeholder="${efb_var.text.description}" id="desEl" required value="${valj_efb[indx].message ? valj_efb[indx].message : ''}">`
    const requireEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="requiredEl" ${valj_efb[indx].required == 1 ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="requiredEl">${efb_var.text.required}</label>                                            
    </div>`;
    const cardEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="cardEl" ${valj_efb[0].dShowBg && valj_efb[0].dShowBg == 1 ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="cardEl">${efb_var.text.dNotShowBg}</label>                                            
    </div>`;
    const offLineEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="offLineEl" ${valj_efb[0].AfLnFrm && valj_efb[0].AfLnFrm == 1 ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="offLineEl">${efb_var.text.AfLnFrm}</label>                                            
    </div>`;
  
    const emailEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="SendemailEl" ${valj_efb[0].email_to && valj_efb[0].email_to == valj_efb[indx].id_ ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="SendemailEl">${efb_var.text.thisEmailNotificationReceive} </label> <i class="efb bi-info-circle efb fs-7 text-success pointer-efb" onClick="Link_emsFormBuilder('EmailNoti')"> </i>                                            
    </div>`;
    const adminFormEmailEls = `<label for="adminFormEmailEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.enterAdminEmailReceiveNoti} <i class="efb bi-info-circle efb fs-7 text-success pointer-efb" onClick="Link_emsFormBuilder('EmailNoti')"> </i></label> 
    <input type="text" data-id="${idset}" class="efb elEdit text-muted form-control h-d-efb border-d efb-rounded  mb-1 efb" placeholder="${efb_var.text.email}" id="adminFormEmailEl" required value="${valj_efb[0].email ? valj_efb[0].email : ''}">`
    const trackingCodeEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="trackingCodeEl" ${valj_efb[0].trackingCode && valj_efb[0].trackingCode == 1 || valj_efb[0].trackingCode == true ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="trackingCodeEl">${efb_var.text.activeTrackingCode}</label>                                            
    </div>`;
    const captchaEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="captchaEl" ${valj_efb[0].captcha && valj_efb[0].captcha == 1 || valj_efb[0].captcha == true ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="captchaEl">${efb_var.text.addGooglereCAPTCHAtoForm}</label>                                            
    </div>`;
    const showSIconsEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="showSIconsEl" ${valj_efb[0].show_icon && valj_efb[0].show_icon == 1 ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="showSIconsEl">${efb_var.text.dontShowIconsStepsName}</label>                                            
    </div>`;
    const showSprosiEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="showSprosiEl" ${valj_efb[0].show_pro_bar && valj_efb[0].show_pro_bar == 1 ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="showSprosiEl">${efb_var.text.dontShowProgressBar}</label>                                            
    </div>`;
    let disable =valj_efb[0].type!="register" && valj_efb[0].type!="login"  ? '' : 'disabled';
    const m_tankYouMessage = valj_efb[0].type!="register" ? efb_var.text.thankYouMessage:efb_var.text.createAcountDoneM;    
    const thankYouMessageEls = `<div class="efb tnxmsg mt-1  ${valj_efb[0].thank_you=="msg" ? 'd-block' :'d-none'}"><label for="thankYouMessageEl" class="efb form-label mt-2 mb-1 efb">${ efb_var.text.thankYouMessage }</label>
    <input ${disable} type="text" data-id="${idset}" class="efb elEdit text-muted form-control h-d-efb border-d efb-rounded  mb-1 efb" placeholder="${efb_var.text.thankYouMessage}" id="thankYouMessageEl" required value="${valj_efb[0].thank_you_message.thankYou ? valj_efb[0].thank_you_message.thankYou : m_tankYouMessage}"></div>`;
    const thankYouMessageDoneEls = `<div class="efb tnxmsg mt-1 ${valj_efb[0].thank_you=="msg" ? 'd-block' :'d-none'}"><label for="thankYouMessageDoneEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.done} ${efb_var.text.message}</label>
    <input ${disable} type="text" data-id="${idset}" class="efb elEdit text-muted form-control h-d-efb border-d efb-rounded  mb-1 efb" placeholder="${efb_var.text.done}" id="thankYouMessageDoneEl" required value="${valj_efb[0].thank_you_message.done ? valj_efb[0].thank_you_message.done : efb_var.text.done}"></div>`;
    const thankYouMessageConfirmationCodeEls = `<div class="efb tnxmsg mt-1 ${valj_efb[0].thank_you=="msg" ? 'd-block' :'d-none'}"><label for="thankYouMessageConfirmationCodeEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.trackingCode} ${efb_var.text.message}</label>
    <input ${disable} type="text" data-id="${idset}" class="efb elEdit text-muted form-control h-d-efb border-d efb-rounded  mb-1 efb" placeholder="${efb_var.text.trackingCode}" id="thankYouMessageConfirmationCodeEl" required value="${valj_efb[0].thank_you_message.trackingCode ? valj_efb[0].thank_you_message.trackingCode : efb_var.text.trackingCode}"></div>`;
    const thankYouMessageErrorEls = `<label for="thankYouMessageErrorEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.error} ${efb_var.text.message}</label>
    <input type="text" data-id="${idset}" class="efb elEdit text-muted form-control h-d-efb border-d efb-rounded  mb-1 efb" placeholder="${efb_var.text.error}" id="thankYouMessageErrorEl" required value="${valj_efb[0].thank_you_message.error ? valj_efb[0].thank_you_message.error : efb_var.text.error}">`;
    const thankYouMessagepleaseFillInRequiredFieldsEls = `<label for="thankYouMessagepleaseFillInRequiredFieldsEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.required} ${efb_var.text.message}</label>
    <input type="text" data-id="${idset}" class="efb elEdit text-muted form-control h-d-efb border-d efb-rounded  mb-1 efb" placeholder="${efb_var.text.pleaseFillInRequiredFields}" id="thankYouMessagepleaseFillInRequiredFieldsEl" required value="${valj_efb[0].thank_you_message.pleaseFillInRequiredFields ? valj_efb[0].thank_you_message.pleaseFillInRequiredFields : efb_var.text.pleaseFillInRequiredFields}">`;
  
   
    const showformLoggedEls = `<div class="efb mx-1 my-3 efb">
    <input  data-id="${idset}" class="efb elEdit form-check-input fs-6" type="checkbox"  id="showformLoggedEl" ${valj_efb[0].stateForm && valj_efb[0].stateForm == 1 ? 'checked' : ''}>
    <label class="efb form-check-label fs-6" for="showformLoggedEl">${efb_var.text.showTheFormTologgedUsers}</label>                                            
    </div>`;
  
    const Nadvanced = `
      ${labelEls}
      ${desEls}
      ${requireEls}`
    const labelFontSizeEls = `
      <label for="labelFontSizeEl" class="efb mt-3 bi-aspect-ratio mx-2 efb">${efb_var.text.labelSize}</label>
                        <select  data-id="${idset}" class="efb elEdit form-select efb border-d efb-rounded"  id="labelFontSizeEl"  data-tag="${valj_efb[indx].type}">                                            
                            <option value="fs-6" ${ valj_efb[indx].label_text_size == 'fs-6' ? `selected` : ''}>${efb_var.text.default}</option>
                            <option value="fs-7" ${ valj_efb[indx].label_text_size == 'fs-7' ? `selected` : ''}>${efb_var.text.small}</option>
                            <option value="fs-5" ${ valj_efb[indx].label_text_size == 'fs-5' ? `selected` : ''} >${efb_var.text.large}</option>                      
                            <option value="fs-4" ${ valj_efb[indx].label_text_size == 'fs-4' ? `selected` : ''} >${efb_var.text.xlarge}</option>                      
                            <option value="fs-3" ${ valj_efb[indx].label_text_size == 'fs-3' ? `selected` : ''} >${efb_var.text.xxlarge}</option>                      
                        </select>`;

      const thankYouTypeEls = `
      <label for="thankYouTypeEl" class="efb mt-3 bi-card-heading mx-2 efb">${efb_var.text.landingTnx}</label>
                        <select  data-id="thankYouTypeEl" class="efb elEdit form-select efb border-d efb-rounded"  id="thankYouTypeEl"  data-tag="${valj_efb[0].thank_you}">                                            
                        <option value="rdrct" ${ valj_efb[0].thank_you == 'rdrct' ? `selected` : ''}>${efb_var.text.redirectPage}</option>                            
                        <option value="msg" ${ valj_efb[0].thank_you == 'msg' ? `selected` : ''}>${efb_var.text.thankYouMessage}</option>
                        </select>`;
                       
    const thankYouredirectEls = `<div id="tnxrdrct" class="efb tnxrdrct my-1 ${ valj_efb[0].thank_you == 'rdrct'? 'd-block' :'d-none' }">
    ${pro_efb==true ?"":funProEfb()}
    <label for="thankYouredirectEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.redirectPage} <i class="efb bi-info-circle efb fs-7 text-success pointer-efb" onClick="Link_emsFormBuilder('redirectPage')"> </i></label> 
    <input type="url" data-id="thankYouredirectEl" class="efb elEdit text-muted form-control h-d-efb border-d efb-rounded  mb-1 efb" placeholder="${efb_var.text.url}" id="thankYouredirectEl" required value="${ valj_efb[0].hasOwnProperty('rePage') ? valj_efb[0].rePage.replace(/(@efb@)+/g, '/') : ''}"></div>`
    const paymentGetWayEls =()=>{
      return`<label for="paymentGetWayEl" class="efb mt-3 bi-wallet-fill mx-2 efb"> ${efb_var.text.paymentGateway}</label>
      <select  data-id="${idset}" class="efb elEdit form-select efb border-d efb-rounded"  id="paymentGetWayEl"  data-tag="${valj_efb[0].type}">                                            
          <option value="stripe" selected>${efb_var.text.stripe}</option>                                                            
      </select>`;
    } 
    const paymentMethodEls =()=>{
     // console.log(`paymentMethodEls[${valj_efb[0].paymentmethod}]`);
      return`<label for="paymentMethodEl" class="efb mt-3 bi-wallet2 mx-2 efb"> ${efb_var.text.methodPayment}</label>
      <select  data-id="${idset}" class="efb elEdit form-select efb border-d efb-rounded text-capitalize"  id="paymentMethodEl"  data-tag="${valj_efb[0].type}">                                            
      <option value="charge" ${valj_efb[0].paymentmethod=='charge' ? 'selected' :''}>${efb_var.text.onetime}</option>                                                            
      <option value="day" ${valj_efb[0].paymentmethod=='day' ? 'selected' :''}>${efb_var.text.dayly}</option>                                                            
      <option value="week" ${valj_efb[0].paymentmethod=='week' ? 'selected' :''}>${efb_var.text.weekly}</option>                                                            
      <option value="month" ${valj_efb[0].paymentmethod=='month' ? 'selected' :''}>${efb_var.text.monthly}</option>                                                            
      <option value="year" ${valj_efb[0].paymentmethod=='year' ? 'selected' :''}>${efb_var.text.yearly}</option>                                                            
    
      </select>`;
    } 
     
    const currencyTypeEls=()=>{
      //const c =currency_efb;
      let op = `<-- options -->`;
      for(let i of currency_efb){
        op += `<option value="${i.toLowerCase()}" ${valj_efb[0].currency.toUpperCase()==i ? 'selected' :''}>${i}</option>`
      }
      return `
      <label for="currencyTypeEl" class="efb mt-3 bi-cash mx-2 efb"> ${efb_var.text.currency}</label>
                        <select  data-id="${idset}" class="efb elEdit form-select efb border-d efb-rounded"  id="currencyTypeEl"  data-tag="${valj_efb[0].currency}">                                            
                           ${op}                     
                        </select>
      `
  
    }

    const paymentPersianPayEls =()=>{
      // console.log(`paymentMethodEls[${valj_efb[0].paymentmethod}]`);
       return`<label for="paymentPersianPayEl" class="efb mt-3 bi-wallet2 mx-2 efb">درگاه</label>
       <select  data-id="${idset}" class="efb elEdit form-select efb border-d efb-rounded text-capitalize"  id="paymentPersianPayEl"  data-tag="${valj_efb[0].type}">                                            
       <option value="zarinPal" ${valj_efb[0].persiaPay=='zarinPal' ? 'selected' :''}>زرین پال</option>                                                            
       <option disabled value="efb" ${valj_efb[0].persiaPay=='efb' ? 'selected' :''}>فرم ساز آسان</option>
       </select>`;
     } 

     const currencyPersianPayEls= `<p for="currencyTypeEl" class="efb text-labelEfb fs-5 mt-3 bi-cash mx-2 efb"> ${efb_var.text.currency}: تومان</p>
      `;
  
    const labelPostionEls = `    
    <div class="efb row efb">     
    <label for="labelPostionEl" class="efb  mt-3 col-12 bi-arrows-angle-contract mx-2">${efb_var.text.labelPostion}</label>
      <div class="efb  btn-group btn-group-toggle col-12 " data-toggle="buttons" data-id="${idset}"  id="labelPostionEl">    
        <label class="efb  ntb btn-primary bi-chevron-bar-down ${valj_efb[indx].label_position && valj_efb[indx].label_position == 'up' ? `active` : ''}" onClick="funSetPosElEfb('${idset}','up')">
          <input type="radio" name="options" class="efb  opButtonEfb elEdit "   data-id="${idset}"  id="labelPostionEl" value="up" >${efb_var.text.up}</label>
        <span class="efb  border-right border border-light "></span>
        <label class="efb  ntb btn-primary bi-chevron-bar-right ${valj_efb[indx].label_position && valj_efb[indx].label_position == 'beside' ? `active` : ''}" onClick="funSetPosElEfb('${idset}','besie')">
          <input type="radio" name="options" class="efb  opButtonEfb elEdit" data-id="${idset}"  id="labelPostionEl" value="beside"> ${efb_var.text.beside}
        </label>
      </div></div>`;
    const ElementAlignEls = (side) => {
      const left = side == 'label' ? 'txt-left' : 'justify-content-start'
      const right = side == 'label' ? 'txt-right' : 'justify-content-end'
      const center = side == 'label' ? 'txt-center' : 'justify-content-center'
      let value = valj_efb[indx].label_align;
      let t = efb_var.text.label
      if (side == 'description') {
        value = valj_efb[indx].message_align;
        t = efb_var.text.description
      }
      return `    
      <div class="efb  row">     
      <label for="labelPostionEl" class="efb  mt-3 col-12 bi-align-center mx-2">${side} ${efb_var.text.align}</label>
        <div class="efb  btn-group btn-group-toggle col-12 " data-toggle="buttons" data-side="${side}" data-id="${idset}"  id="ElementAlignEl">    
          <label class="efb ntb btn-primary bi-align-start ${value == left ? `active` : ''}" onClick="funSetAlignElEfb('${idset}','${left}','${side}')">
            <input type="radio" name="options" class="efb  opButtonEfb elEdit "  data-id="${idset}"  id="labelPostionEl" value="left" >${efb_var.text.left}</label>
          <span class="efb border-right border border-light "></span>
          <label class="efb ntb btn-primary bi-align-center ${value == center ? `active` : ''}" onClick="funSetAlignElEfb('${idset}','${center}','${side}')">
            <input type="radio" name="options" class="efb opButtonEfb elEdit" data-id="${idset}"  id="labelPostionEl" value="center">${efb_var.text.center}</label>
          <span class="efb border-right border border-light "></span>
          <label class="efb ntb btn-primary bi-align-end ${value == right ? `active` : ''}" onClick="funSetAlignElEfb('${idset}','${right}','${side}')">
            <input type="radio" name="options" class="efb  opButtonEfb elEdit" data-id="${idset}"  id="labelPostionEl" value="right">${efb_var.text.right}</label>
        </div></div>`;
    }
    const widthEls = `
      <label for="widthEl" class="efb  mt-3 bi-arrow-left-right mx-2">${efb_var.text.width}</label>
      <select  data-id="${idset}" class="efb  efb-rounded elEdit form-select"  id="sizeEl" >                                            
          <option value="33" ${valj_efb[indx].size == 33 ? `selected` : ''}>33%</option>
          <option value="50" ${valj_efb[indx].size == 50 ? `selected` : ''}>50%</option>
          <option value="80" ${valj_efb[indx].size == 80 ? `selected` : ''} >80%</option>
          <option value="100" ${valj_efb[indx].size == 100 ? `selected` : ''} >100%</option>
      </select>
      `
    const classesEls = `
      <label for="cssClasses" class="efb  mt-3 bi-journal-code mx-2">${efb_var.text.cSSClasses}</label>
      <input type="text"  data-id="${idset}" class="efb  elEdit text-muted form-control border-d efb-rounded efb mb-3 mb-1" id="classesEl" placeholder="${efb_var.text.cSSClasses}"  ${valj_efb[indx].classes && valj_efb[indx].classes.length > 1 ? `value="${valj_efb[indx].classes}"` : ''}>
      `
    const valueEls = `
    <label for="valueEl" class="efb  mt-3 bi-cursor-text mx-2">${efb_var.text.value}</label>
      <input type="text"  data-id="${idset}" class="efb elEdit text-muted form-control border-d efb-rounded efb mb-3" data-tag="${valj_efb[indx].type}" id="valueEl" placeholder="${efb_var.text.defaultValue}" ${valj_efb[indx].value && valj_efb[indx].value.length > 1 ? `value="${valj_efb[indx].value}"` : ''}>
      `
    const placeholderEls = `
      <label for="placeholderEl" class="efb  mt-3 bi-patch-exclamation mx-2">${efb_var.text.placeholder}</label>
      <input type="text"  data-id="${idset}" class="efb  elEdit form-control text-muted border-d efb-rounded h-d-efb mb-1"id="placeholderEl" placeholder="${efb_var.text.placeholder}" ${valj_efb[indx].placeholder && valj_efb[indx].placeholder.length > 1 ? `value="${valj_efb[indx].placeholder}"` : ''}>
      `
    const cornerEls = (side) => {
  
      return `
        <div class="efb  row">
        <label for="cornerEl" class="efb  mt-3 col-12 bi-bounding-box-circles">${efb_var.text.corners}</label>
        <div class="efb  btn-group col-12  btn-group-toggle" data-toggle="buttons" data-side="${side}" data-id="${idset}-set" data-tag="${valj_efb[indx].type}" id="cornerEl">    
          <label class="efb  ntb  btn-primary bi-app ${valj_efb[indx].corner && valj_efb[indx].corner == 'efb-rounded' ? `active` : ''}" onClick="funSetCornerElEfb('${idset}','efb-rounded')">
            <input type="radio" name="options" class="efb  opButtonEfb elEdit "  data-id="${idset}"  id="cornerEl" value="efb-rounded" >${efb_var.text.rounded}</label>
          <span class="efb  border-right border border-light "></span>
          <label class="efb  ntb btn-primary bi-diamond ${valj_efb[indx].corner && valj_efb[indx].corner == 'efb-square' ? `active` : ''}" onClick="funSetCornerElEfb('${idset}','efb-square')">
            <input type="radio" name="options" class="efb  opButtonEfb elEdit" data-id="${idset}"  id="cornerEl" value="efb-square"> ${efb_var.text.square}</label>
        </div></div>`
    }
    const iconEls = (side) => {
      let icon = "";
      let t = ""
      let iset ="";
      //console.log(`valj_efb`,valj_efb);
      if (side == "Next") {iset=idset=side+"_"; icon = valj_efb[0].button_Next_icon; t = efb_var.text.next; }
      else if (side == "Previous") {iset=idset=side+"_"; icon = valj_efb[0].button_Previous_icon; t = efb_var.text.previous }
      else if ( side =='tnx') {
       
        if(valj_efb[0].thank_you_message.hasOwnProperty('icon')){
          iset=idset=side="DoneIconEfb"; icon=valj_efb[0].thank_you_message.icon; t=`${efb_var.text.thankYou}`;
        }else{
          return '<!-- Icon not exist for Done message-->';
        }
      }else {
       idset != "button_group" ? iset=idset=valj_efb[indx].id_: iset=idset="button_group_"
        if(isNumericEfb(iset))idset=iset="step-"+iset;
       //console.log(iset)
        icon = valj_efb[indx].icon }
      let list =`<tr class="efb efblist text-white" data-id="${iset}" data-name="bi-XXX" data-row="-2" data-state="0" data-visible="1">
      <th scope="row" class="efb bi-XXXXX"></th>
      <td>None</td>      
     </tr>`
      bootstrap_icons.forEach((e,key )=> {
        const v= e.replace(`-`, ' ');      
        list+=`<tr class="efb efblist text-white" data-id="${iset}" data-name="bi-${e}" data-row="${key}" data-state="0" data-visible="1">
        <th scope="row" class="efb bi-${e}"></th>
        <td>${v}</td>      
      </tr>`      
      });
      let iNo =''
      if (icon.length>1){
         iNo =bootstrap_icons.findIndex(x=>x==icon.replace('bi-',''));
      }
      //check for Nex and previous

      return `
      <div class="efb ${ side!="DoneIconEfb"? '' :`tnxmsg mt-1 ${valj_efb[0].thank_you=="msg" ? 'd-block' :'d-none'}` }"> <label for="iconEl" class="efb form-label bi-heptagon mx-2 mt-2 mb-0">${t} ${efb_var.text.icon} </label>
          <div class="efb  listSelect my-2">     
            <div class="efb  efblist mx-1  p-2 inplist  h-d-efb elEdit border efb border-d efb-rounded" id="iconEl" data-id="${iset}" data-idset="${idset}" data-side="${side}"  data-no="1" data-parent="1" data-iconset="${iNo}" data-select="">${icon=="" ? efb_var.text.selectOption :icon!='bi-undefined'? icon :'None'}</div>
            <i class="efb  efblist  h-d-efb iconDD bi-caret-down-fill text-primary" data-id="${iset}"></i>
            <div class="efb  efblist mx-1  listContent d-none rounded-bottom  bg-secondary" data-id="${iset}" data-list="${iset}">
            <table class="efb  table ${iset}">
                    <thead class="efb  efblist">
                      <tr><div class="efb  searchSection efblist  p-2 bg-secondary">
                        <!--  <i class="efb  efblist  searchIcon  bi-search text-primary "></i> -->
                          <input type="text" class="efb  efblist search searchBox my-1 col-12 rounded border-primary" data-id="${iset}" data-tag="search" placeholder="🔍 ${efb_var.text.search}" onkeyup="FunSearchTableEfb('${iset}')">                                            
                        </div></tr>
                    </thead> <tbody class="efb">
                    ${list}
                    </tbody></table>
            </div>
          </div>
      </div>
        `
    }
  
  
    const SingleTextEls = (side) => {
      let text = "";
      let t = ""
      if (side == "Next") { text = valj_efb[0].button_Next_text; t = efb_var.text.next; }
      else if (side == "Previous") { text = valj_efb[0].button_Previous_text; t = efb_var.text.previous; }
      else { text = valj_efb[indx].button_single_text }
      /* side == "Next" ? text = valj_efb[0].button_Next_text : text = valj_efb[0].button_Previous_text;
      side == "" ? text = valj_efb[indx].button_single_text : 0; */
      side == "Next" ? text = valj_efb[0].button_Next_text : text = valj_efb[0].button_Previous_text;
      side == "" ? text = valj_efb[indx].button_single_text : 0;
      return `<label for="SingleTextEl" class="efb  form-label  mt-2">${t} ${efb_var.text.text}</label>
      <input type="text" data-id="${idset}" class="efb  elEdit text-muted border-d efb-rounded form-control h-d-efb mb-1" data-side="${side}" placeholder="${efb_var.text.text}" id="SingleTextEl" required value="${text ? text : ''}">`
    }
  
  
    const fileTypeEls = `
          <label for="fileTypeEl" class="efb  mt-3 bi-file-earmark-medical mx-2 ">${efb_var.text.fileType}</label>
          <select  data-id="${idset}" class="efb  elEdit form-select border-d efb-rounded"  id="fileTypeEl" data-tag="${valj_efb[indx].type}">                                            
          <option value="document" ${valj_efb[indx].file && valj_efb[indx].file == 'document' ? `selected` : ''} >${efb_var.text.documents}</option>
          <option value="image" ${valj_efb[indx].file && valj_efb[indx].file == 'image' ? `selected` : ''}>${efb_var.text.image}</option>
          <option value="media" ${valj_efb[indx].file && valj_efb[indx].file == 'media' ? `selected` : ''} >${efb_var.text.media}</option>
          <option value="zip" ${valj_efb[indx].file && valj_efb[indx].file == 'zip' ? `selected` : ''} >${efb_var.text.zip}</option>
      </select>
      `
    const btnColorEls =() =>{
      //console.log(indx,valj_efb[indx]);
      color = valj_efb[indx].button_color;
      //console.log(ColorNameToHexEfbOfElEfb(color.slice(4),indx,'btn') ,color)
      const hex=ColorNameToHexEfbOfElEfb(color.slice(4),indx,'btn') //slice text=5 bg=2 border=6 btn=3    
      addColorTolistEfb(hex);
      idset =  valj_efb[indx].type =="esign" ? idset+'-id' :idset;
      return `<label for="btnColorEl" class="efb mt-3 bi-paint-bucket mx-2 efb">${efb_var.text.buttonColor}</label>
      <input type="color" id="btnColorEl" class="efb elEdit form-select efb border-d efb-rounded" data-id="${idset}" data-el="button" data-type="button"  data-tag="${valj_efb[indx].type}" value="${hex!=''?hex:'#fff000'}" name="btnColorEl" list="color_list_efb" id="${idset}" >
      `
    } 
  
    const selectBorderColorEls = (forEl) => {       
      let color = valj_efb[indx].el_border_color;
      let t = ''
      const hex=ColorNameToHexEfbOfElEfb(color.slice(7),indx,'border') //slice text=5 bg=2 border=6 btn=3       
      addColorTolistEfb(hex);
      return `<label for="selectBorderColorEl" class="efb mt-3 bi-paint-bucket mx-2 efb">${efb_var.text.borderColor}</label>
      <input type="color" id="selectBorderColorEl" class="efb elEdit form-select efb border-d efb-rounded" data-id="${idset}" data-el="${forEl}" data-type="border"  data-tag="${valj_efb[indx].type}" value="${hex!=''?hex:'#fff000'}" name="selectColorEl" list="color_list_efb" id="${idset}" >
      `
    }
    const hrefEls = () => {       
      return `<label for="hrefEl" class="efb mt-3 bi-box-arrow-up-right mx-2 efb">${efb_var.text.link}</label>
      <input type="url" id="hrefEl" class="efb  elEdit text-muted form-control border-d efb-rounded efb mb-3 mb-1" data-id="${idset}" data-el="link" data-type="border" placeholder="https://"  data-tag="${valj_efb[indx].type}" value="${valj_efb[indx].href}" name="hrefEls"  id="${idset}" >
      `
    }
    const selectColorEls = (forEl ,f) => {
      //f ===> text , border,  bg 
      //console.log(forEl,indx)
      let t = ''
      let color = '';
      let hex=''
      if (forEl == 'icon') {
        color = valj_efb[indx].icon_color;
        //console.log(color.slice(5));
        t = efb_var.text.icon;
        if(color!="") hex=ColorNameToHexEfbOfElEfb(color.slice(5),indx,'icon') //slice text=5 bg=2 border=6 btn=3
      } else if (forEl == 'description') {
        color = valj_efb[indx].message_text_color;
        //console.log(color.slice(5));
        t = efb_var.text.description
        if(color!="") hex=ColorNameToHexEfbOfElEfb(color.slice(5),indx,'description')
      } else if (forEl == 'label') {
        color = valj_efb[indx].label_text_color;
        //console.log(color.slice(5));
        t = efb_var.text.label
        if(color!="") hex=ColorNameToHexEfbOfElEfb(color.slice(5),indx,'label')
      } else if (forEl == "el") {
        color = valj_efb[indx].el_text_color;
        //console.log(color.slice(5));
        t = efb_var.text.field
        if(color!="") hex=ColorNameToHexEfbOfElEfb(color.slice(5),indx,'el')
      }
      addColorTolistEfb(hex);
      return `<label for="selectColorEl" class="efb mt-3 bi-paint-bucket mx-2 efb">${t} ${efb_var.text.clr}</label>
      <input type="color" id="selectColorEl" class="efb elEdit form-select efb border-d efb-rounded" data-id="${idset}" data-el="${forEl}" data-type="${f}"  data-tag="${valj_efb[indx].type}" value="${hex!=''?hex:'#fff000'}" name="selectColorEl" list="color_list_efb" id="${idset}" >
      `
    }
    const selectHeightEls = () => {
      //console.log(indx,valj_efb[indx].el_height ,valj_efb[indx].el_height );
      return `
        <label for="selectHeightEl" class="efb  mt-3 bi-arrow-down-up mx-2">${efb_var.text.height}</label>
        <select  data-id="${idset}" class="efb  efb-rounded elEdit form-select"  id="selectHeightEl" data-tag="${valj_efb[indx].type}">                                            
        <option value="h-d-efb" ${ valj_efb[indx].el_height == 'h-d-efb' ? `selected` : ''}>${efb_var.text.default}</option>
        <option value="h-l-efb"  ${ valj_efb[indx].el_height == 'h-l-efb' ? `selected` : ''} >${efb_var.text.large}</option>                      
        <option value="h-xl-efb"  ${ valj_efb[indx].el_height == 'h-xl-efb' ? `selected` : ''} >${efb_var.text.xlarge}</option>                      
        <option value="h-xxl-efb"  ${ valj_efb[indx].el_height == 'h-xxl-efb' ? `selected` : ''} >${efb_var.text.xxlarge}</option>                      
        <option value="h-xxxl-efb"  ${ valj_efb[indx].el_height == 'h-xxxl-efb' ? `selected` : ''} >${efb_var.text.xxxlarge}</option>   
        </select>
        `
    }
    const fontSizeEls = () => {
      return `
        <label for="fontSizeEl" class="efb  mt-3 bi-arrow-down-up mx-2">${efb_var.text.height}</label>
        <select  data-id="${idset}" class="efb  efb-rounded elEdit form-select"  id="fontSizeEl" data-tag="${valj_efb[indx].type}">                                                  
        <option value="display-1"  ${valj_efb[indx].el_text_size ==  'display-1' ? `selected` : ''}>${efb_var.text.xxxlarge}</option>
        <option value="display-2"  ${valj_efb[indx].el_text_size == 'display-2' ? `selected` : ''} >${efb_var.text.xxlarge}</option>                      
        <option value="display-3"  ${valj_efb[indx].el_text_size == 'display-3' ? `selected` : ''} >${efb_var.text.xlarge}</option>                      
        <option value="display-4"  ${valj_efb[indx].el_text_size == 'display-4' ? `selected` : ''} >${efb_var.text.large}</option>                            
        <option value="display-5"  ${valj_efb[indx].el_text_size == 'display-5' ? `selected` : ''} >${efb_var.text.medium }</option>                            
        <option value="display-6"  ${valj_efb[indx].el_text_size == 'display-6' ? `selected` : ''} >${efb_var.text.small }</option>                            
        <option value="display-7"  ${valj_efb[indx].el_text_size == 'display-7' ? `selected` : ''} >${efb_var.text.xsmall}</option>                            
        <option value="display-8"  ${valj_efb[indx].el_text_size == 'display-8' ? `selected` : ''} >${efb_var.text.xxsmall}</option>                            
        </select>
        `
    }
  
    const selectMultiSelectEls = `<label for="labelEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.maxSelect}</label>
    <input type="number"  data-id="${idset}" class="efb  elEdit form-control text-muted border-d efb-rounded h-d-efb mb-1"  placeholder="${efb_var.text.maxSelect}" id="selectMultiSelectMaxEl"  value="${valj_efb[indx].maxSelect ? valj_efb[indx].maxSelect : '2'}" >
    <label for="labelEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.minSelect}</label>
    <input type="number"  data-id="${idset}" class="efb  elEdit form-control text-muted border-d efb-rounded h-d-efb mb-1"  placeholder="${efb_var.text.minSelect}" id="selectMultiSelectMinEl"  value="${valj_efb[indx].minSelect ? valj_efb[indx].minSelect : '0'}" >`
  
  //console.log(el.dataset);
   
    switch (el.dataset.tag) {
      case 'email':
      case 'text':
      case 'password':
      case 'tel':
      case 'number':
      case 'url':
      case "textarea":
        body = `
                <div class="efb  mb-3">
                <!--  not   advanced-->
                ${Nadvanced}
                ${placeholderEls}
                ${el.dataset.tag == "email" ? emailEls : ''}
                <!--  not   advanced-->
                <div class="efb  d-grid gap-2">              
               <button class="efb btn btn-outline-light mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="true" aria-controls="collapseAdvanced">
                    <i class="efb  bi-arrow-down-circle-fill me-1"></i>${efb_var.text.advanced}
                </button>
                </div>
                <div class="efb mb-3 mt-3" id="collapseAdvanced">
                        <div class="efb  mb-3 px-3 row">                                            
                        ${labelFontSizeEls}
                        ${selectColorEls('label','text')}
                        ${selectColorEls('description','text')}
                        ${selectColorEls('el','text')}
                        ${selectBorderColorEls('element')}
                        
                        ${labelPostionEls}
                        ${ElementAlignEls('label')}
                        ${ElementAlignEls('description')}
                        ${widthEls}
                        ${selectHeightEls()}
                        ${cornerEls('')}
                        ${valueEls}
                        ${classesEls}
                        </div>
                    </div>
                </div><div class="efb  clearfix"></div>
                `
        break;
      case "heading":
        body = `
                <div class="efb  mb-3">
                <!--  not   advanced-->
                ${valueEls}
                ${selectColorEls('el','heading')}
                ${fontSizeEls()}                                  
                ${classesEls}
                <div class="efb  clearfix"></div>
                `
        break;
      case "link":
        body = `
                <div class="efb  mb-3">
                <!--  not   advanced-->
                ${valueEls}
                ${hrefEls()}                                  
                ${selectColorEls('el','link')}
                ${selectHeightEls()}                                  
                ${classesEls}
                <div class="efb  clearfix"></div>
                `
        break;
      case "radio":
      case "checkbox":
      case "select":
      case "multiselect":
      case "conturyList":
      case "stateProvince":
      case "payCheckbox":
      case "payRadio":
      case "paySelect":
      case "payMultiselect":
        const objOptions = valj_efb.filter(obj => {
          return obj.parent === el.id
        })
        let s = el.dataset.tag;
        s= s=="payCheckbox" || s=="payRadio" || s=="paySelect" || s=="payMultiselect" ? true :false
        const newRndm = Math.random().toString(36).substr(2, 9);
        let opetions = `<!-- options --!>`;
        const col = s==true ||  form_type_emsFormBuilder=="smart"  ?'col-md-7':'col-md-12'
  
        if (objOptions.length > 0) {

          const ftyp=el.dataset.tag.includes("pay") ? 'payment':'';
          for (let ob of objOptions) {         
            opetions += `<div id="${ob.id_op}-v" class="efb  col-md-12">
          <input type="text" placeholder="${efb_var.text.name}" id="EditOption"  value="${ob.value}" data-parent="${el.id}" data-id="${ob.id_op}" data-tag="${el.dataset.tag}" class="efb  ${col}  text-muted mb-1 fs-5 border-d efb-rounded elEdit">
          ${s==true ? `<input type="number" placeholder="$"  value='${typeof ob.price=="string" ? ob.price : 0}' data-value="" min="0" id="paymentOption" data-parent="${el.id}" data-id="${ob.id_op}" data-tag="${el.dataset.tag}-payment"  class="efb  col-md-3 text-muted mb-1 fs-6 border-d efb-rounded elEdit">` :''}
          <div class="efb  btn-edit-holder ${ftyp=="payment" ||  ftyp=="smart" ?'pay':'newop' }" id="deleteOption" data-parent_id="${ob.parent}">
            <button type="button" id="deleteOption"  onClick="delete_option_efb('${ob.id_op}')" data-parent="${el.id}" data-tag="${el.dataset.tag}"  data-id="${ob.id_op}" class="efb btn efb btn-edit btn-sm elEdit" data-bs-toggle="tooltip" title="${efb_var.text.delete}"> 
                <i class="efb  efb bi-x-lg text-danger"></i>
            </button>
            <button type="button" id="addOption" onClick="add_option_edit_pro_efb('${el.id.trim()}','${el.dataset.tag.trim()}' ,${valj_efb.length})" data-parent="${el.id}" data-tag="${el.dataset.tag}" data-id="${newRndm}" class="efb btn efb btn-edit btn-sm elEdit" data-bs-toggle="tooltip" title="${efb_var.text.add}" > 
                <i class="efb  bi-plus-circle  text-success"></i>
            </button> 
            
          </div>
          </div>`
          }
        }
  
        //optionElpush_efb
        
        body = `
                <div class="efb  mb-3">
                <!--notAdvanced-->
                ${Nadvanced}
                ${ el.dataset.tag == 'multiselect' ||el.dataset.tag == 'payMultiselect'? selectMultiSelectEls :''}
                <label for="optionListefb" class="efb  ">${efb_var.text.options} 
                <button type="button" id="addOption" onClick="add_option_edit_pro_efb('${el.id.trim()}','${el.dataset.tag.trim()}' ,${valj_efb.length})" data-parent="${el.id}" data-tag="${el.dataset.tag}" data-id="${newRndm}"   class="efb btn efb btn-edit btn-sm elEdit" data-bs-toggle="tooltip" title="${efb_var.text.add}" > 
                <i class="efb  bi-plus-circle  text-success"></i>
               </button> 
                </label>
                <div id="optionListeHeadfb" class="efb  mx-1 col-md-12 row ">
                    <div class="efb  col-md-7 text-capitalize">${efb_var.text.title}</div>
                    ${el.dataset.tag.includes('pay')?`<div class="efb  col-md-3 text-capitalize">${efb_var.text.price}</div>`:''}
                </div>
                <div class="efb  mb-3" id="optionListefb">
                 ${opetions}
                </div>
                <!--notAdvanced-->
  
                <!--advanced-->
                <div class="efb  d-grid gap-2">
                    <button class="efb btn btn-outline-light mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="true" aria-controls="collapseAdvanced">
                      <i class="efb  bi-arrow-down-circle-fill me-1"></i>${efb_var.text.advanced}                    
                    </button>
                </div>
                <div class="efb mb-3 mt-3" id="collapseAdvanced">
                        <div class="efb  mb-3 px-3 row">                                        
                        ${labelFontSizeEls}
                        ${selectColorEls('label','text')}
                        ${selectColorEls('description','text')}
                        ${fun_el_select_in_efb(el.dataset.tag)  ? cornerEls('') : ''} 
                        ${fun_el_select_in_efb(el.dataset.tag) ? selectBorderColorEls('element') : ''} 
                        ${el.dataset.tag != 'multiselect' || el.dataset.tag != 'payMultiselect' ? selectColorEls('el','text') : ''} 
                        ${labelPostionEls}
                        ${ElementAlignEls('label')}
                        ${ElementAlignEls('description')}
                        ${widthEls}     
                        ${fun_el_select_in_efb(el.dataset.tag) ? selectHeightEls() : ''}               
                        ${classesEls}
                        </div>
                    </div>
                    
                </div>
                <div class="efb  clearfix"></div>
                `
        break;
      case "date":
      case "color":
      case "range":
      case "esign":
      case "rating":
      case "switch":
        body = `
        <div class="efb  mb-3">
        <!--  not   advanced-->
        ${Nadvanced}
        <!--  not   advanced-->
        <div class="efb  d-grid gap-2">              
       <button class="efb btn btn-outline-light mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="true" aria-controls="collapseAdvanced">
            <i class="efb  bi-arrow-down-circle-fill me-1"></i>${efb_var.text.advanced}
        </button>
        </div>
        <div class="efb mb-3 mt-3" id="collapseAdvanced">
                <div class="efb  mb-3 px-3 row">                                            
                ${labelFontSizeEls}
                ${selectColorEls('label','text')}
                ${selectColorEls('description','text')}
               
                ${el.dataset.tag == 'rating' || el.dataset.tag == 'range'  || el.dataset.tag == 'switch' ? "" : selectBorderColorEls('element')}
                ${labelPostionEls}
                ${ElementAlignEls('label')}
                ${ElementAlignEls('description')}
                ${el.dataset.tag == 'rating' ? '' : widthEls}
                ${selectHeightEls()}
                ${el.dataset.tag == 'rating' || el.dataset.tag == 'switch' ? '' : cornerEls('')}
                ${/* el.dataset.tag == 'esign' ? selectColorEls('icon') : '' */ ''}
                ${el.dataset.tag == 'esign' ? iconEls('') : ''}
                ${el.dataset.tag == 'esign' ? btnColorEls() : ''}
                ${el.dataset.tag == 'esign' ? SingleTextEls('') : ''}
                </div>
            </div>
        </div><div class="efb  clearfix"></div>
        `
        break;
      case "file":
      case "dadfile":
        body = `
        <div class="efb  mb-3">
        <!--  not   advanced-->
        ${Nadvanced}
        ${el.dataset.tag == 'dadfile' ?fileTypeEls:''}
        <!--  not   advanced-->
        <div class="efb  d-grid gap-2">              
       <button class="efb btn btn-outline-light mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="true" aria-controls="collapseAdvanced">
            <i class="efb  bi-arrow-down-circle-fill me-1"></i>${efb_var.text.advanced}
        </button>
        </div>
        <div class="efb mb-3 mt-3" id="collapseAdvanced">
                <div class="efb  mb-3 px-3 row">                                                          
                ${labelFontSizeEls}
                ${selectColorEls('label','text')}
                ${selectColorEls('description','text')}
                ${el.dataset.tag == 'dadfile' ? selectColorEls('icon','text') : ''}
                ${el.dataset.tag == 'dadfile' ? btnColorEls() : ''}
                ${selectBorderColorEls('element')}
                ${labelPostionEls}
                ${ElementAlignEls('label')}
                ${ElementAlignEls('description')}
                ${widthEls}
                ${selectHeightEls()}
                ${cornerEls()}
                ${classesEls}
                <!-- select type of file -->
                </div>
            </div>
        </div><div class="efb  clearfix"></div>
        `
        break;
      case "maps":
        // Object.assign(valj_efb[indx], { lat: 49.24803870604257, lon: -123.10512829684463 })
  
        body = `
        <div class="efb  mb-3">
        <!--  not   advanced-->
        ${Nadvanced}
        <label for="letEl" class="efb  form-label  mt-2">${efb_var.text.latitude}</label>
        <input type="text" data-id="${idset}" class="efb elEdit text-muted form-control border-d efb-rounded efb h-d-efb mb-1" placeholder="${efb_var.text.exDot} 49.24803870604257" id="letEl" required value="${valj_efb[indx].lat}">
        <label for="lonEl" class="efb  form-label  mt-2">${efb_var.text.longitude}</label>
        <input type="text" data-id="${idset}" class="efb elEdit text-muted form-control border-d efb-rounded efb h-d-efb mb-1" placeholder="${efb_var.text.exDot}  -123.10512829684463" id="lonEl" required value="${valj_efb[indx].lng}">
        <label for="marksEl" class="efb  form-label  mt-2">${efb_var.text.points.toUpperCase()}      
        <i class="efb bi-info-circle efb fs-7 text-success pointer-efb" onclick="Link_emsFormBuilder('pickupByUser')"> </i>
        </label>
        <input type="text" data-id="${idset}" class="efb elEdit text-muted form-control border-d efb-rounded efb h-d-efb mb-1" placeholder=${efb_var.text.exDot}  1" id="marksEl" required value="${valj_efb[indx].mark}">
        <!--  not   advanced-->
        <div class="efb  d-grid gap-2">              
       <button class="efb btn btn-outline-light mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="true" aria-controls="collapseAdvanced">
            <i class="efb   bi-arrow-down-circle-fill me-1"></i>${efb_var.text.advanced}
        </button>
        </div>
        <div class="efb mb-3 mt-3" id="collapseAdvanced">
                <div class="efb  mb-3 px-3 row">
                ${labelPostionEls} 
                ${ElementAlignEls('label')}   
                ${ElementAlignEls('description')}                                        
                ${widthEls}
                ${selectHeightEls()}
                ${labelFontSizeEls}
                ${selectColorEls('label','text')}
                ${selectColorEls('description','text')}
                </div>
            </div>
        </div><div class="efb  clearfix"></div>
        `
  
        break;
      case "html":
        const valHTML = valj_efb[indx].value.replace(/@!/g,`"`);
        body = `
        <div class="efb  mb-3">
        <!--  not   advanced-->
        <label for="htmlCodeEl" class="efb  form-label mt-2 mb-1"><i class="efb  bi-code-square mx-2" ></i>${efb_var.text.code}</label>
        <small class="efb text-info text-danger bg-muted  efb">${efb_var.text.pleaseDoNotAddJsCode}</small>
        <textarea placeholder="${efb_var.text.htmlCode}" 
        class="efb elEdit form-control efb  h-d-efb   mb-1"
         data-id="${valj_efb[indx].id_}" id="htmlCodeEl" rows="13" >${valHTML}</textarea>
        </div><div class="efb  clearfix"></div>
        `
        break;
      case "yesNo":
        body = `
        <div class="efb  mb-3">
        <!--  not   advanced-->
        ${Nadvanced}
        <!--  not   advanced-->
        <div class="efb  d-grid gap-2">              
       <button class="efb btn btn-outline-light mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="true" aria-controls="collapseAdvanced">
            <i class="efb  bi-arrow-down-circle-fill me-1"></i>${efb_var.text.advanced}
        </button>
        </div>
        <div class="efb mb-3 mt-3" id="collapseAdvanced">
                <div class="efb  mb-3 px-3 row">                                            
                ${labelFontSizeEls}
                ${selectColorEls('label','text')}
                ${selectColorEls('description','text')}
                ${selectColorEls('el','text')}
                ${btnColorEls()}
                ${labelPostionEls}
                ${ElementAlignEls('label')}
                ${ElementAlignEls('description')}
                
                ${widthEls}
                ${selectHeightEls()}
                ${cornerEls('yesNo')}
                <label for="valueEl" class="efb  mt-3 bi-cursor-text mx-2">${efb_var.text.button1Value}</label>
                <input type="text"  data-id="${idset}" class="efb elEdit border-d efb-rounded text-muted form-control efb mb-3" id="valueEl" data-tag="yesNo" data-no="1" placeholder="${efb_var.text.exDot} ${efb_var.text.yes}" value="${valj_efb[indx].button_1_text}">
                <label for="valueEl" class="efb  mt-3 bi-cursor-text mx-2">${efb_var.text.button2Value}</label>
                <input type="text"  data-id="${idset}" class="efb elEdit border-d efb-rounded text-muted form-control efb mb-3" id="valueEl" data-tag="yesNo" data-no="2" placeholder="${efb_var.text.exDot} ${efb_var.text.no}" value="${valj_efb[indx].button_2_text}">
                ${classesEls}
                </div>
            </div>
        </div><div class="efb  clearfix"></div>
        `
        break;
      case "booking":
        break;
      case "steps":
        body = `
        <div class="efb  mb-3">
        <!--  not   advanced-->
        ${labelEls}
        ${desEls}
    
                                    
        </div>
        <!--  not   advanced-->
        <div class="efb  d-grid gap-2">              
       <button class="efb btn btn-outline-light mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="true" aria-controls="collapseAdvanced">
            <i class="efb  bi-arrow-down-circle-fill me-1"></i>${efb_var.text.advanced}
        </button>
        </div>
        <div class="efb mb-3 mt-3" id="collapseAdvanced">
                <div class="efb  mb-3 px-3 row">
                ${iconEls('')}
               
                ${selectColorEls('label','text')}   
                ${selectColorEls('description','text')}     
                ${selectColorEls('icon','text')}                                          
                ${classesEls}              
                </div>
            </div>
        </div><div class="efb  clearfix"></div>
        `
        break;
      case "buttonNav":
        //console.log("buttonNav");
        let content = ` 
        ${SingleTextEls('')}
        ${iconEls('')}
        ${selectColorEls('el','text')}
        ${cornerEls('Next')}
        ${btnColorEls()}
        ${selectColorEls('icon','text')}
        ${selectHeightEls()}`
  
        if (valj_efb[0].button_state != "single") {
          content = `
             ${SingleTextEls("Previous")}
             ${iconEls("Previous")}
             ${SingleTextEls("Next")}
             ${iconEls("Next")}
             ${selectColorEls('el','text')}
             ${cornerEls('Next')}
             ${btnColorEls()}
             ${selectColorEls('icon','text')}
             ${selectHeightEls()}
             `
        }
        body = `
        <div class="efb  mb-3">
        <!--  not   advanced-->
                    ${content}                      
        </div>
        `
        break;
      case 'formSet':
        body = `
          <label for="formNameEl" class="efb form-label mt-2 mb-1 efb">${efb_var.text.formName}<span class="efb  mx-1 efb text-danger">*</span></label>
           <input type="text"  data-id="${idset}" class="efb elEdit text-muted form-control efb  h-d-efb  mb-1"  placeholder="${efb_var.text.formName}" id="formNameEl" required value="${valj_efb[0].formName}">
          ${trackingCodeEls}
          ${captchaEls}
          ${showSIconsEls}
          ${showSprosiEls}
          ${showformLoggedEls}
          ${cardEls}
          ${offLineEls}
          ${adminFormEmailEls}
         
         
         
          <div class="efb  d-grid gap-2">
          <button class="efb btn btn-outline-light mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="true" aria-controls="collapseAdvanced">
            <i class="efb  bi-arrow-down-circle-fill me-1"></i>${efb_var.text.advanced}                    
          </button>
      </div>
      <div class="efb mb-3 mt-3" id="collapseAdvanced">
              <div class="efb  mb-3 px-3 row">   
          ${thankYouTypeEls}
          ${valj_efb[0].type!="login" ? iconEls('tnx'):''}
          ${valj_efb[0].type!="register" && valj_efb[0].type!="login" ? thankYouMessageDoneEls :''}
          ${valj_efb[0].type!="login" ? thankYouMessageEls :''}
          ${valj_efb[0].type!="register" && valj_efb[0].type!="login"  ? thankYouMessageConfirmationCodeEls :''}
          ${thankYouredirectEls}
          </div>
          </div>        
      </div>
      <div class="efb  clearfix"></div>
        
          `
        break;
        case 'stripe':
        
  
        body = `<div class="efb  mb-3">
        <!--  not   advanced-->
          <h2 class="efb  text-muted">${efb_var.text.stripe}</h2>
              ${valj_efb[0].type=="payment" ? currencyTypeEls() :''}
          ${valj_efb[0].type=="payment" ? paymentMethodEls() :''}
        <div class="efb  clearfix"></div>
        </div>`
    
        break;
        case 'persiaPay':
          body = `<div class="efb  mb-3">
          <h2 class="efb  text-muted">${efb_var.text.paymentGateway}</h2>
          <!--  not   advanced-->
                ${valj_efb[0].type=="payment" ? currencyPersianPayEls :''}
            ${valj_efb[0].type=="payment" ? paymentPersianPayEls() :''}
          <div class="efb  clearfix"></div>
          </div>`
        break;
  
    }
  
    
    //console.log("show_setting_window_efb",body)
    //show_modal_efb(body, efb_var.text.edit, 'bi-ui-checks mx-2', 'settingBox')
    //sideMenuEfb(1)
   // document.getElementById('sideBoxEfb').classList.add('show');
    //console.log('body',body);
    document.getElementById('sideMenuConEfb').innerHTML=body;
    //console.log(document.getElementById('sideMenuConEfb').innerHTML)
    for (const el of document.querySelectorAll(`.elEdit`)) {
      if(el.tagName!="DIV"){el.addEventListener("change", (e) => { change_el_edit_Efb(el);})}
      else{ }
    }
  
  }

  

  jQuery(document).ready(function(){jQuery("body").addClass("folded")})
function remove_other_noti_Efb(){
  window.onload=(()=>{
    // remove all notifications from other plugins or wordpress
      setTimeout(() => { 
          for (const el of document.querySelectorAll(".notice")) {
              el.remove()
          }
      },50)
  })
}


function creator_form_builder_Efb() {
  remove_other_noti_Efb()
  if (valj_efb.length < 2) {
    step_el_efb = 1;

    valj_efb.push({
      type: form_type_emsFormBuilder, steps: 1, formName: efb_var.text.form, email: '', trackingCode: true, EfbVersion: 2,
      button_single_text: efb_var.text.submit, button_color: 'btn-primary', icon: 'bi-ui-checks-grid', button_Next_text: efb_var.text.next, button_Previous_text: efb_var.text.previous,
      button_Next_icon: 'bi-chevron-right', button_Previous_icon: 'bi-chevron-left', button_state: 'single', corner: 'efb-square', label_text_color: 'text-light',
      el_text_color: 'text-light', message_text_color: 'text-muted', icon_color: 'text-light', el_height: 'h-d-efb', email_to: false, show_icon: false,
      show_pro_bar: false, captcha: false, private: false, sendEmail: false, font: true, stateForm: 0,
      thank_you: 'msg',
      thank_you_message: { icon: 'bi-hand-thumbs-up', thankYou: efb_var.text.thanksFillingOutform, done: efb_var.text.done, trackingCode: efb_var.text.trackingCode, error: efb_var.text.error, pleaseFillInRequiredFields: efb_var.text.pleaseFillInRequiredFields }, email_temp: '', font: true,
    });
    if (form_type_emsFormBuilder == "payment") {
      Object.assign(valj_efb[0], { getway: 'stripe', currency: 'usd', paymentmethod: 'charge' })
    }

  }


  let els = "<!--efb.app-->";
  let dragab = true;
  let disable = "disable";
  let formType = valj_efb[0].type
  const ond = `onClick="noti_message_efb('${efb_var.text.error}','${efb_var.text.thisElemantNotAvailable}',7,'danger')"`
  if (formType == "login") {
    dragab = false;
    disable = ond;
    //thisElemantNotAvailable
  }
console.log(efb_var.addons);
  for (let ob of fields_efb) {
   
    if (formType == "login") { if (ob.id == "html" || ob.id == "link" || ob.id == "heading") { dragab = true; disable = "disable" } else { dragab = false; disable = ond } }
    // else if (formType=="payment") {if( ob.id=="stripe") { dragab=false;disable=ond} else {{ dragab=true;disable="disable"}}}
    if(ob.id=="stripe" && efb_var.addons.AdnSPF !=1){
      disable = `onClick="noti_message_efb('${efb_var.text.error}', '${efb_var.text.IMAddonP}', 20 , 'danger')"`
      dragab = false;
    }else if(ob.id=="persiaPay" && efb_var.addons.AdnPPF !=1){
      disable = `onClick="noti_message_efb('${efb_var.text.error}', '${efb_var.text.IMAddonP}', 20 , 'danger')"`
      dragab = false;
    }
    els += `
    <div class="efb tag col-3 draggable-efb ${ob.tag}" draggable="${dragab}" id="${ob.id}" ${mobile_view_efb ? `onClick="add_element_dpz_efb('${ob.id}')"` : ''}>
     ${ob.pro == true && pro_efb == false ? ` <a type="button" onClick='pro_show_efb(1)' class="efb pro-version-efb" data-bs-toggle="tooltip" data-bs-placement="top" title="${efb_var.text.fieldAvailableInProversion}" data-original-title="${efb_var.text.fieldAvailableInProversion}"><i class="efb  bi-gem text-light"></i></a>` : ''}
      <button type="button" class="efb btn efb btn-select-form float-end ${disable != "disable" ? "btn-muted" : ''}" id="${ob.id}_b" ${disable}><i class="efb  ${ob.icon}"></i><span class="efb d-block text-capitalize">${ob.name}</span></button>
    </div>
    `
    dragab = true;
    disable = "disable";
  }

  let navs = [
    { name: efb_var.text.save, icon: 'bi-save', fun: `saveFormEfb()` },
    { name: efb_var.text.pcPreview, icon: 'bi-display', fun: `previewFormEfb('pc')` },
    { name: efb_var.text.formSetting, icon: 'bi-sliders', fun: `show_setting_window_efb('formSet')` },
    { name: efb_var.text.help, icon: 'bi-question-lg', fun: `Link_emsFormBuilder('createSampleForm')` }

  ]
  //if (devlop_efb == true) navs.push({ name: 'edit(Test)', icon: 'bi-pen', fun: `editFormEfb()` });
  let nav = "<!--efb.app-->";
  for (let ob in navs) {
    if( typeof navs[ob] == 'object') {
      nav += `<li class="efb nav-item"><a class="efb nav-link efb btn text-capitalize ${ob == 2 ? 'BtnSideEfb' : ''} ${ob != 0 ? '' : 'btn-outline-pink'} " ${navs[ob].fun.length > 2 ? `onClick="${navs[ob].fun}""` : ''} ><i class="efb ${navs[ob].icon} mx-1 "></i>${navs[ob].name}</a></li>`;
    }
  }

  document.getElementById(`content-efb`).innerHTML = `
  <div class="efb ${mobile_view_efb ? 'my-2 mx-1' : 'm-5'}" id="pCreatorEfb" >
  <div id="panel_efb">
      <nav class="efb navbar navbar-expand-lg navbar-light bg-light my-2 bg-response efb">
          <div class="efb container-fluid">
              <button class="efb navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation"><span class="efb navbar-toggler-icon"></span></button>
              <div class="efb collapse navbar-collapse py-1" id="navbarTogglerDemo01"><ul class="efb navbar-nav me-auto mb-2 mb-lg-0">${nav}</ul></div>
          </div>      
      </nav>
      <div class="efb row">
      <!-- over page -->
      <div id="overlay_efb" class="efb d-none"><div class="efb card-body text-center efb mt-5 pt-2"><div class="efb lds-hourglass efb text-white"></div><h3 class="efb ">${efb_var.text.pleaseWaiting}</h3></div></div>
      <!--end  over page -->
          <div class="efb  col-md-4" id="listElEfb">
          
            <ul class="efb my-2 row" id="listCatEfb">
                <li class="efb col-3">
                  <a class="efb nav-link cat fs-6 efb active all" aria-current="page" onclick="funUpdateLisetElEfb('all')" role="button">${efb_var.text.all}</a>
                </li>
                <li class="efb col-3">
                  <a class="efb nav-link cat fs-6 efb basic" onclick="funUpdateLisetElEfb('basic')"  role="button">${efb_var.text.basic}</a>
                </li>
                <li class="efb col-3">
                  <a class="efb nav-link cat fs-6 efb payment" onclick="funUpdateLisetElEfb('payment')"  role="button">${efb_var.text.payment}</a>
                </li>
                <li class="efb col-3">
                  <a class="efb nav-link cat fs-6 efb advance" onclick="funUpdateLisetElEfb('advance')"  role="button">${efb_var.text.advanced}</a>
                </li>
                <hr class="efb hr">
            </ul>
          <div class="efb row">${els}</div></div>
         <div class="efb  col-md-8 body-dpz-efb"><div class="efb crd efb  drag-box"><div class="efb card-body dropZoneEFB row items " id="dropZoneEFB">
       
        <div id="efb-dd" class="efb text-center ">
        <h1 class="efb text-muted display-1  bi-plus-circle-dotted"> </h1>
        <div class="efb text-muted fs-4 efb">${!mobile_view_efb ? efb_var.text.dadFieldHere : ''}</div>
        </div>

         </div></div></div></div>
      </div>
  <div class="efb modal fade " id="settingModalEfb" aria-hidden="true" aria-labelledby="settingModalEfb"  role="dialog" tabindex="-1" data-backdrop="static" >
      <div class="efb modal-dialog modal-dialog-centered " id="settingModalEfb_" >
          <div class="efb modal-content efb " id="settingModalEfb-sections">
                  <div class="efb modal-header efb"> <h5 class="efb modal-title efb" ><i class="efb bi-ui-checks mx-2" id="settingModalEfb-icon"></i><span id="settingModalEfb-title" class="efb ">${efb_var.text.editField}</span></h5></div>
                  <div class="efb modal-body" id="settingModalEfb-body"><div class="efb card-body text-center"><div class="efb  lds-hourglass"></div><h3 class="efb ">${efb_var.text.pleaseWaiting}</h3></div></div>
  </div></div></div>
  </div></div>
  `
  create_dargAndDrop_el();
  items_dd_efb();
}

function funUpdateLisetElEfb(cat){
  change_active_cat_efb(cat);
  change_visible_el_efb(cat);
  //efb nav-link cat fs-6 efb basic
  
}

 change_active_cat_efb=(cat)=>{
  let els = document.querySelectorAll('.efb.cat');
  for(let i =0;i<els.length;i++){
    els[i].classList.remove('active');
    els[i].classList.contains(cat) ? els[i].classList.add('active') : '';
  }
 
}
change_visible_el_efb=(cat)=>{
  let els = document.querySelectorAll('.efb.tag');
  for(let i =0;i<els.length;i++){
    els[i].classList.remove('d-none');
    els[i].classList.contains(cat) ? '' : els[i].classList.add('d-none'); 
  }
}

function funUpdateLisetcardTitleEfb(cat){
  change_active_cat_efb(cat);
  change_visible_el_efb(cat);
}


items_dd_efb = () => {
  jQuery(function () {

    jQuery(".items").sortable({

      items: "setion:not(.unsortable)",
      start: function (event, ui) {
        ui.item.toggleClass("highlight");
        if (ui.item.hasClass('unsortable')) {
          console.log('item is ------> unsortable');
          return;
        }
      },
      stop: function (event, ui) {
        ui.item.hasClass('ui-state-disabled') ? ui.item.removeData('sortableItem') : false;
        ui.item.toggleClass("highlight");
        sort_obj_el_efb_();       
      }
    });
    jQuery("#items").disableSelection();
  });
}

items_dd_refresh_efb = () => {
  jQuery(function () {
    jQuery(".items").sortable("refresh");
  })
}

console.log('load');
  console. log(jQuery(). jquery);