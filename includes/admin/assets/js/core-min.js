let exportView_emsFormBuilder=[],stepsCountEfb,sendBack_emsFormBuilder=[],sessionPub_emsFormBuilder="reciveFromServer",stepNames_emsFormBuilder=["t","Sync","Sync"],currentTab_emsFormBuilder=0,multiSelectElemnets_emsFormBuilder=[],valueJson_ws=[],demo_emsFormBuilder=!1,validate_edit_mode_emsFormBuilder=!1,test_view__emsFormBuilder=!0;function fun_render_view_core_emsFormBuilder(check){exportView_emsFormBuilder=[],valueJson_ws=JSON.parse(localStorage.getItem("valueJson_ws_p")),form_type_emsFormBuilder=valueJson_ws&&valueJson_ws[0].type?valueJson_ws[0].type:"form";for(let v of valueJson_ws=null==valueJson_ws?"N":valueJson_ws){let el="",id,req,classData="";switch(v.type){case"text":case"password":case"email":case"number":case"image":case"date":case"tel":case"url":case"range":case"color":id=v.id||v.id_,req=v.required||!1,"date"==v.type||"email"!=v.type&&"tel"!=v.type&&"url"!==v.type&&"password"!==v.type||(classData="validation");var vtype="payCheckbox"==v.type||"payRadio"==v.type||"paySelect"==v.type||"payMultiselect"==v.type?v.type.slice(2).toLowerCase():v.type;el+=`<div class="efb row emsFormBuilder" id="${id}-row"> <label for="${id}" class="efb emsFormBuilder" >${v.name} ${1==v.required?"*":""}</label><input type="${vtype}"  id='${id}' name="${id}" class="efb ${v.class?v.class+" emsFormBuilder_v ":"emsFormBuilder emsFormBuilder_v"} ${classData} ${1==v.required?"require":""}"  ${1==v.required?"require":""} ${v.tooltip?`placeholder="${v.tooltip}"`:""} data-id="${v.id_}" ${1==v.required?"required":""}>`,exportView_emsFormBuilder.push({id_:v.id_,element:el,step:v.step,amount:v.amount,type:v.type,required:req,amount:v.amount});break;case"file":id=v.id||v.id_,req=v.required||!1;vtype=v.fileDrogAndDrop||!1;let acception=".zip,.rar",typeFile="Zip";if("Image"==v.file)acception=".png,.jpg,.jpeg",typeFile="Photo";else if("Media"==v.file)acception=".mp3,.mp4,.wav,.wav,.AVI,.WebM,.MKV,.FLV",typeFile=v.file;else if("Document"==v.file)acception=".xlsx,.xls,.doc,.docx,.ppt, pptx,.pptm,.txt,.pdf,.dotx,.rtf,.odt,.ods,.odp",typeFile=v.file;else if("Zip"==v.file)acception=".zip,.rar",typeFile=v.file;else if("customize"==v.file){if(acception=".zip ,.rar",v.hasOwnProperty("file_ctype")){var arr=v.file_ctype.split(",");for(let i=0;i<arr.length;i++)acception+=`.${arr[i]},`}typeFile=acception}classData=1==vtype?"form-control-file text-secondary ":"",el=` <div class="efb row emsFormBuilder ${1==vtype?"inputDnD":""}" id="${id}-row"> <label for="${id}" class="efb emsFormBuilder" >${v.name} ${1==v.required?"*":""}</label><input type="${v.type}"  id='${id}' name="${id}" class="efb ${v.class?v.class+" emsFormBuilder_v ":"emsFormBuilder emsFormBuilder_v "} ${classData} ${1==v.required?"require":""}"  ${1==v.required?"require":""} ${v.tooltip?`placeholder="${v.tooltip}"`:""} accept="${acception}" onchange="valid_file_emsFormBuilder('${id}')" data-id="${v.id_}" ${1==v.required?"required":""} ${1==vtype?` data-title="${efb_var.text.DragAndDropA} ${typeFile} ${efb_var.text.orClickHere}"`:""}>`,exportView_emsFormBuilder.push({id_:v.id_,element:el,step:v.step,amount:v.amount,type:v.type,required:req,amount:v.amount});break;case"textarea":id=v.id||v.id_,req=v.required||!1,el=`<div class="efb row emsFormBuilder" id="${id}-row"> <label for="${id}" class="efb emsFormBuilder" >${v.name}  ${1==v.required?"*":""}</label><textarea id='${id}' name="${id}" class="efb ${v.class?v.class+" emsFormBuilder_v":"emsFormBuilder emsFormBuilder_v"} ${1==v.required?"require":""}" ${v.tooltip?`placeholder="${v.tooltip}"`:""} data-id="${v.id_}" ${1==v.required?"required":""}></textarea>`,exportView_emsFormBuilder.push({id_:v.id_,element:el,step:v.step,amount:v.amount,type:v.type,required:req,amount:v.amount});break;case"button":id=v.id||v.id_,el=`<div class="efb row emsFormBuilder" id="${id}-row"> <button  id='${id}' name="${id}" class="efb ${v.class?v.class+"  emsFormBuilder_v":"btn btn-primary emsFormBuilder_v btn-lg btn-block"}" ${v.tooltip?`placeholder="${v.tooltip}"`:""} data-id="${v.id_}" value="${v.name}">${v.name}</button>`,exportView_emsFormBuilder.push({id_:v.id_,element:el,step:v.step,amount:v.amount,type:v.type,amount:v.amount});break;case"checkbox":case"radiobutton":id=v.id||v.id_;var typ="checkbox"==v.type?"checkbox":"radio";req=v.required||!1,el=`<div class="efb  emsFormBuilder"><div class="efb row"><label for="${v.id_}" id="${v.id_}" class="efb emsFormBuilder emsFormBuilder-title ${1==v.required?"require":""}" data-id="${v.id_}" >${v.name}  ${1==v.required?"*":""}</label></div>`,exportView_emsFormBuilder.push({id_:v.id_,element:el,step:v.step,amount:v.amount,parents:v.id_,type:typ,required:req,amount:v.amount});break;case"multiselect":case"payMultiselect":id=v.id||v.id_,req=v.required||!1,1==v.allowMultiSelect&&1==test_view__emsFormBuilder?el+=`<div class="efb row emsFormBuilder" id="${id}-row"> <label for="${id}" class="efb emsFormBuilder" >${v.name}(Disabled) ${1==v.required?"*":""}</label><input type="${v.type}"  id='${id}' name="${id}" class="efb ${v.class?v.class+" emsFormBuilder_v ":"emsFormBuilder emsFormBuilder_v"} ${classData} ${1==v.required?"require":""}"  ${1==v.required?"require":""} placeholder="${efb_var.text.selectOpetionDisabled}" data-id="${v.id_}" disabled>`:el+=` <div class="efb  emsFormBuilder  row" id="emsFormBuilder-${v.id_}"><label for="${v.id_}" class="efb emsFormBuilder" data-id="${v.id_}" >${v.name}  ${1==v.required?"*":""}</label><select id='${id}' name="${v.id_}" class="efb ${v.class?v.class+" emsFormBuilder_v ":"emsFormBuilder emsFormBuilder_v "} ${1==v.allowMultiSelect?"multiple-emsFormBuilder":""} ${1==v.required?"require":""}" value="${v.name}"  placeholder='${v.tooltip||" Select"}' data-id="${v.id_}"   ${1==v.allowMultiSelect?'multiple="multiple" multiple':""}>`,exportView_emsFormBuilder.push({id_:v.id_,element:el,step:v.step,amount:v.amount,parents:v.id_,type:"select",required:req,amount:v.amount});break;case"option":id=v.id||v.id_;typ=exportView_emsFormBuilder.findIndex(x=>x.parents===v.parents);if(-1<typ){req=!(!exportView_emsFormBuilder[typ].required||null==exportView_emsFormBuilder[typ].required)&&exportView_emsFormBuilder[typ].required;const parent_id=exportView_emsFormBuilder[typ].id_;var row=valueJson_ws.find(x=>x.id_===parent_id);test_view__emsFormBuilder=1==row.allowMultiSelect,"radio"!=exportView_emsFormBuilder[typ].type&&"checkbox"!=exportView_emsFormBuilder[typ].type||(exportView_emsFormBuilder[typ].element+=`<div class="efb row emsFormBuilder"><div class="efb emsFormBuilder_option col-1"><input type="${exportView_emsFormBuilder[typ].type}" id='${id}' name="${v.parents}" class="efb ${v.class?v.class+"  emsFormBuilder_v col":"emsFormBuilder emsFormBuilder_v"} ${1==req?"require":""}" value="${v.name}" ${v.tooltip?`placeholder="${v.tooltip}"`:""} data-id="${v.id_}"}></div> <div class="efb col-10 efb emsFormBuilder_option"><label for="${v.parents}" class="efb emsFormBuilder" >${v.name}</label></div></div>`),"select"==exportView_emsFormBuilder[typ].type&&0==test_view__emsFormBuilder&&(exportView_emsFormBuilder[typ].element+=`<option  id='${id}' class="efb ${v.class?""+v.class:"emsFormBuilder "} ${1==req?"require":""}" value="${v.name}" name="${v.parents}" value="${v.name}" data-id="${v.id_}">${v.name}</option>`),exportView_emsFormBuilder[typ].required=!1,test_view__emsFormBuilder=!0}}}var button_name="form"!=form_type_emsFormBuilder?efb_var.text[form_type_emsFormBuilder]:efb_var.text.send,button_name=`<!-- commenet --!><div class="efb m-2">
<div class="efb  row d-flex justify-content-center align-items-center">
    <div class="efb col-md-12 efb">
        <div id="emsFormBuilder-form-view" >
        <form id="emsFormBuilder-form-view-id">
            <h1 id="emsFormBuilder-form-view-title" class="efb emsFormBuilder">${efb_var.text.preview}</h1>                
            <div class="efb emsFormBuilder-all-steps-view" id="emsFormBuilder-all-steps-view" ${"form"==form_type_emsFormBuilder?"":'style="display:none;"'}> 
                <span class="efb emsFormBuilder-step-view" id="emsFormBuilder-firstStepIcon-view"><i class="efb fa fa-tachometer"></i></span> 
                <div class="efb emsFormBuilder-addStep-view" id="emsFormBuilder-addStep-view" >
                </div>
                <span class="efb emsFormBuilder-step-view"><i class="efb px-1 fa fa-floppy-o"></i></span> 
            </div>
            <div class="efb emsFormBuilder-all-steps-view" ${"form"==form_type_emsFormBuilder?"":'style="display:none;"'} > 
                <h5 class="efb emsFormBuilder-step-name-view f-setp-name" id ="emsFormBuilder-step-name-view">${efb_var.text.preview}</h5> 
            </div>
            <div id="emsFormBuilder-message-area-view"></div>
            <div class="efb emsFormBuilder-tab-view" id="emsFormBuilder-firstTab-view">
            </div>
            <div  id="emsFormBuilder-tabInfo-view">
            </div>
            <div  id="emsFormBuilder-tabList-view">
            </div>           
            <div class="efb thanks-message text-center" id="emsFormBuilder-text-message-view"> 
                <h3>${efb_var.text.registered}</h3> <span>${efb_var.text.yourInformationRegistered}</span>
            </div>
            <div style="overflow:auto;" id="emsFormBuilder-text-nextprevious-view">
            
            ${1<valueJson_ws[0].steps?` <div style="float:right;"> <button type="button" id="emsFormBuilder-text-prevBtn-view" class="efb emsformbuilder" class="efb mat-shadow emsFormBuilder" onclick="emsFormBuilder_nevButton_view(-1)"><i class="efb ${1==ajax_object_efm.rtl?"fa fa-angle-double-right":"fa fa-angle-double-left"}"></i></button>  <button type="button" id="emsFormBuilder-text-nextBtn-view" class="efb mat-shadow emsFormBuilder" onclick="emsFormBuilder_nevButton_view(1)"><i class="efb ${1==ajax_object_efm.rtl?"fa fa-angle-double-left":"fa fa-angle-double-right"}"></i></button> </div> `:`<button type="button" id="emsFormBuilder-text-nextBtn-view" class="efb btn btn-lg btn-block mat-shadow btn-type" onclick="emsFormBuilder_nevButton_view(1)">${button_name} </button> </div> `}
                              
            </div>
          </form>      
        </div>
    </div>
</div>
</div>`;if(1!=check)return button_name;document.getElementById("body_emsFormBuilder")&&(document.getElementById("body_emsFormBuilder").innerHTML=button_name),0<exportView_emsFormBuilder.length&&(valueJson_ws[0].steps,valueJson_ws[0].formName,document.getElementById("emsFormBuilder-form-view-title").innerHTML=String(valueJson_ws[0].formName),document.getElementById("emsFormBuilder-step-name-view").innerHTML=valueJson_ws[0]["name-1"]),ShowTab_emsFormBuilder_view(currentTab_emsFormBuilder),createStepsOfPublic()}function ShowTab_emsFormBuilder_view(n){var x=document.getElementsByClassName("emsFormBuilder-tab-view");null!=x[n]&&(x[n]&&(x[n].style.display="block",x[n].classList.add("fadeInEFB")),document.getElementById("emsFormBuilder-text-prevBtn-view")&&(0!=n||null!=n[0]&&!n[0]?document.getElementById("emsFormBuilder-text-prevBtn-view").style.display="inline":document.getElementById("emsFormBuilder-text-prevBtn-view").style.display="none"),x.length,validateForm_fixStepInd_view(n))}function emsFormBuilder_nevButton_view(n){if(0!=n){var x=document.getElementsByClassName("emsFormBuilder-tab-view");if(1==n&&!validateForm_emsFormBuilder_view())return!1;x[currentTab_emsFormBuilder].style.display="none",stepName_emsFormBuilder_view(currentTab_emsFormBuilder+=n)}if(0==n){document.getElementById("emsFormBuilder-firstTab-view").style.display="block",document.getElementById("emsFormBuilder-firstTab-view").classList.add="step",document.getElementById("emsFormBuilder-text-nextprevious-view").style.display="block",document.getElementById("emsFormBuilder-all-steps-view").style.display="",document.getElementById("emsFormBuilder-form-view-title").style.display="block",document.getElementById("emsFormBuilder-text-message-view").style.display="none";for(var el of document.querySelectorAll(".finish"))el.classList.remove("finish"),el.classList.remove("active"),el.classList.contains("first");currentTab_emsFormBuilder=n}x&&currentTab_emsFormBuilder>=x.length&&(document.getElementById("emsFormBuilder-text-nextprevious-view").style.display="none",document.getElementById("emsFormBuilder-all-steps-view").style.display="none",document.getElementById("emsFormBuilder-form-view-title").style.display="none",document.getElementById("emsFormBuilder-text-message-view").style.display="block",0==demo_emsFormBuilder?endMessage_emsFormBuilder_view():document.getElementById("emsFormBuilder-text-message-view").innerHTML=`<h1 class="efb px-1 fas fa-thumbs-up faa-bounce animated text-primary"></h1> <h3>${efb_var.text.done}!</br><small>(Demo)</smal><h3>`),ShowTab_emsFormBuilder_view(currentTab_emsFormBuilder)}function validateForm_emsFormBuilder_view(){let x,valid=!0,NotValidCount=0;(x=document.getElementsByClassName("emsFormBuilder-tab-view"))[currentTab_emsFormBuilder].querySelectorAll(".require");let value;try{for(const input of x[currentTab_emsFormBuilder].querySelectorAll(".require , .validation")){var req=input.classList.contains("require");if("INPUT"==input.tagName)switch(""==input.value&&input.classList.contains("require")?(input.className+=" invalid",valid=!1):(input.classList.remove("invalid"),value=input.value),input.type){case"email":valid=!0!==req||valid_email_emsFormBuilder(input);break;case"tel":valid=!0!==req||valid_phone_emsFormBuilder(input);break;case"password":input.value.length<=6?(valid=!1,input.className+=" invalid",document.getElementById(input.id+"-row").innerHTML+=`<small class="efb text-danger" id="${input.id}-message">${efb_var.text.password8Chars}</small>`):(input.classList.remove("invalid"),document.getElementById(input.id+"-message")&&document.getElementById(input.id+"-message").remove());break;case"url":null===input.value.match(/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/g)&&1==input.classList.contains("require")?(valid=!1,input.className+=" invalid",document.getElementById(input.id+"-row").innerHTML+=`<small class="efb text-danger" id="${input.id}-message">${efb_var.text.enterValidURL}</small>`):(valid=!0,document.getElementById(input.id+"-message")&&document.getElementById(input.id+"-message").remove(),input.classList.remove("invalid"));break;case"file":input.id;valid=!!input.files[0]}else if("LABEL"==input.tagName){var l,ll=document.getElementsByName(input.dataset.id);let state=!1;for(l of ll)1==l.checked&&(input.classList.remove("invalid"),state=!0,value=l.value);0==state&&(value="",input.className+=" invalid",valid=!1)}else"SELECT"==input.tagName?""==input.value?(input.className+=" invalid",valid=!1):value=input.value:input.tagName;0==valid&&(NotValidCount+=1,document.getElementById("emsFormBuilder-message-area-view").innerHTML=alarm_emsFormBuilder(efb_var.text.pleaseFillInRequiredFields)),1==valid&&0==NotValidCount&&(document.getElementsByClassName("emsFormBuilder-step-view")[currentTab_emsFormBuilder].className+=" finish",document.getElementById("alarm_emsFormBuilder"))&&(document.getElementById("emsFormBuilder-message-area-view").innerHTML="")}}catch(re){}return!(0<NotValidCount)}function validateForm_fixStepInd_view(n){for(var x=document.getElementsByClassName("emsFormBuilder-step-view"),i=0;i<x.length;i++)x[i].className=x[i].className.replace(" active","");x[n].className+=" active"}function createStepsOfPublic(){if(1==valueJson_ws.length&&"N"==valueJson_ws&&document.getElementById("emsFormBuilder-form-view"))return document.getElementById("emsFormBuilder-form-view").innerHTML=`<h1 class='efb emsFormBuilder'><i class="efb fas fa-exclamation-triangle faa-flash animated text-danger""></i></h1><h3 id="formNotFound">${efb_var.text.formNotFound}</h3> <span>${efb_var.text.errorV01}</span>`,!1;stepsCountEfb=Number(valueJson_ws[0].steps);var addStep=document.getElementById("emsFormBuilder-addStep-view"),tabList=document.getElementById("emsFormBuilder-tabList-view"),tabInfo=document.getElementById("emsFormBuilder-tabInfo-view");if(null!=addStep){if(addStep.hasChildNodes())for(;addStep.hasChildNodes();)addStep.removeChild(addStep.childNodes[0]);if(tabList.hasChildNodes())for(;tabList.hasChildNodes();)tabList.removeChild(tabList.childNodes[0]);if(tabInfo.hasChildNodes())for(;tabInfo.hasChildNodes();)tabInfo.removeChild(tabInfo.childNodes[0]);exportView_emsFormBuilder=exportView_emsFormBuilder.sort(function(a,b){return Number(a.amount)-Number(b.amount)});for(let i=1;i<=stepsCountEfb;i++){tags="",icon="icon-"+i,icon=valueJson_ws[0][icon]?valueJson_ws[0]["icon-"+i]:"fa fa-tachometer",stepNames_emsFormBuilder[i-1]=valueJson_ws[0]["name-"+i];let id;for(var v of exportView_emsFormBuilder)Number(v.step)==i&&(id=1===Number(v.step)?"emsFormBuilder-firstTab-view":"emsFormBuilder-tabList-view",tags+="select"!=v.type?v.element+"</div></br>":v.element+"</select></div></br>");""!=tags&&(document.getElementById(id).innerHTML+="emsFormBuilder-firstTab-view"==id?tags:`<div class="efb emsFormBuilder-tab-view"> ${tags}</div>`),1==i?document.getElementById("emsFormBuilder-firstStepIcon-view").innerHTML=`<i class="efb ${icon}"></i>`:document.getElementById("emsFormBuilder-addStep-view").innerHTML+=`<span class="efb emsFormBuilder-step-view" id="stepIcon-${i-1}"><i class="efb ${icon}"></i></span>`}for(const el of document.querySelectorAll(".emsFormBuilder_v"))"submit"!=el.type?el.addEventListener("change",e=>{e.preventDefault();let value="";const id_=el.dataset.id;e=valueJson_ws.find(x=>x.id_===id_);if("text"==el.type||"password"==el.type||"color"==el.type||"number"==el.type||"date"==el.type||"url"==el.type||"range"==el.type||"textarea"==el.type)value=el.value;else if("radio"==el.type||"checkbox"==el.type)value=el.value,e.name=document.getElementById(e.parents).innerText;else if("select-one"==el.type)value=el.value;else if("select-multiple"==el.type){el.name;if(1==el.classList.contains("multiple-emsFormBuilder"))for(let i=0;i<el.children.length;i++)value+=el.children[i].value+","}else if("email"==el.type){var state=valid_email_emsFormBuilder(el);value=1==state?el.value:""}else if("tel"==el.type){const state=valid_phone_emsFormBuilder(el);value=1==state?el.value:""}""!==value&&fun_sendBack_emsFormBuilder([{id_:id_,name:e.name,value:value,session:sessionPub_emsFormBuilder}][0],355)}):"submit"==el.type&&el.addEventListener("click",e=>{const id_=el.dataset.id;var ob=valueJson_ws.find(x=>x.id_===id_);fun_sendBack_emsFormBuilder([{id_:id_,name:ob.name,value:el.value,session:sessionPub_emsFormBuilder}][0])})}}function fun_sendBack_emsFormBuilder(ob){if(ob.hasOwnProperty("value")&&(ob.value=ob.value.replaceAll("'","@efb@sq#"),ob.value=ob.value.replaceAll("`","@efb@vq#"),ob.value=ob.value.replaceAll('"',"@efb@dq#"),ob.value=ob.value.replaceAll(`	`," "),ob.value=ob.value.replaceAll(``," "),ob.value=ob.value.replaceAll("\r","@efb@nq#"),ob.value=ob.value.replaceAll(`
`,"@efb@nq#"),ob.value=ob.value.replaceAll("\r"," ")),"undefined"!=typeof sendBack_emsFormBuilder_pub){if(0<sendBack_emsFormBuilder_pub.length){let indx=sendBack_emsFormBuilder_pub.findIndex(x=>x.id_===ob.id_);-1==indx||"switch"==ob.type||"checkbox"!=sendBack_emsFormBuilder_pub[indx].type&&"payCheckbox"!=sendBack_emsFormBuilder_pub[indx].type&&"multiselect"!=sendBack_emsFormBuilder_pub[indx].type&&"payMultiselect"!=sendBack_emsFormBuilder_pub[indx].type?-1!=indx&&"@file@"==ob.value?sendBack_emsFormBuilder_pub[indx]=ob:-1==indx?sendBack_emsFormBuilder_pub.push(ob):"string"!=typeof ob.price?sendBack_emsFormBuilder_pub[indx].value=ob.value:(sendBack_emsFormBuilder_pub[indx].value=ob.value,sendBack_emsFormBuilder_pub[indx].price=ob.price):-1==(indx=sendBack_emsFormBuilder_pub.findIndex(x=>x.id_===ob.id_&&x.value==ob.value))?sendBack_emsFormBuilder_pub.push(ob):sendBack_emsFormBuilder_pub.splice(indx,1)}else sendBack_emsFormBuilder_pub.push(ob);sendBack_emsFormBuilder=sendBack_emsFormBuilder_pub}}function fun_multiSelectElemnets_emsFormBuilder(ob){if(0<multiSelectElemnets_emsFormBuilder.length){var indx=multiSelectElemnets_emsFormBuilder.findIndex(x=>x.parents===ob.parents);if(-1!==indx){var map=multiSelectElemnets_emsFormBuilder[indx];let check=0;for(const key of Object.keys(map))1===(check=ob[key]===map[key]?1:check)&&"parents"!==key&&void 0!==map[key]&&void 0!==ob[key]&&map[key]!==ob[key]&&(multiSelectElemnets_emsFormBuilder[indx]=ob,document.getElementById(key).selected,check=2);1==check&&Object.assign(multiSelectElemnets_emsFormBuilder[indx],ob)}else multiSelectElemnets_emsFormBuilder.push(ob)}else multiSelectElemnets_emsFormBuilder.push(ob);return 0}function saveLocalStorage_emsFormBuilder_view(){localStorage.setItem("valueJson_ws",JSON.stringify(valueJson_ws))}function alarm_emsFormBuilder(val){return`<div class="efb alert alert-warning alert-dismissible fade show " role="alert" id="alarm_emsFormBuilder">
  <div class="efb emsFormBuilder"><i class="efb fas fa-exclamation-triangle faa-flash animated"></i></div>
    <strong>${efb_var.text.alert} </strong>${val}
  </div>`}function endMessage_emsFormBuilder_view(){var el,stepMax=currentTab_emsFormBuilder+1,notfilled=[];for(let i=1;i<=stepMax;i++)-1==sendBack_emsFormBuilder.findIndex(x=>x.step==i)&&notfilled.push(i);let countRequired=0,valueExistsRequired=0;for(el of exportView_emsFormBuilder)if(1==el.required){const id=el.id_;countRequired+=1,-1==sendBack_emsFormBuilder.findIndex(x=>x.id_==id)&&(valueExistsRequired+=1)}countRequired!=valueExistsRequired&&sendBack_emsFormBuilder.length<1?document.getElementById("emsFormBuilder-text-message-view").innerHTML=`<h1 class='efb emsFormBuilder'><i class="efb fas fa-exclamation-triangle faa-flash animated text-danger""></i></h1><h3>Failed</h3> <span>${efb_var.text.pleaseMakeSureAllFields}</span>
    <div class="efb display-btn"> <button type="button" id="emsFormBuilder-text-prevBtn-view" onclick="emsFormBuilder_nevButton_view(0)" style="display;"><i class="efb fa fa-angle-double-left"></i></button></div>`:(document.getElementById("emsFormBuilder-text-message-view").innerHTML=`<h1 class="efb fas fa-sync fa-spin text-primary emsFormBuilder "></h1> <h3 class="efb fs-3"> ${efb_var.text.pleaseWaiting}<h3>`,actionSendData_emsFormBuilder())}function stepName_emsFormBuilder_view(i){document.getElementById("emsFormBuilder-step-name-view").innerHTML="null"!=stepNames_emsFormBuilder[i]&&null!=stepNames_emsFormBuilder[i]?" "+stepNames_emsFormBuilder[i]:""}function valid_email_emsFormBuilder(el){document.getElementById(el.id+"-message")&&document.getElementById(el.id+"-message").remove();var check=0,format=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return check+=el.value.match(format)?0:1,el.value.match(format)||(el.className+=" invalid"),0<check?document.getElementById(el.id+"-row").innerHTML+=`<small class="efb text-danger" id="${el.id}-message">${efb_var.text.enterTheEmail}</small>`:document.getElementById("alarm_emsFormBuilder")&&(el.classList.remove("invalid"),document.getElementById(el.id+"-message"))&&document.getElementById(el.id+"-message").remove(),!(0<check)}function valid_phone_emsFormBuilder(el){document.getElementById(el.id+"-message")&&document.getElementById(el.id+"-message").remove();var check=0,format=/^\s*(?:\+?(\d{1,3}))?([-. (]*(\d{3})[-. )]*)?((\d{3})[-. ]*(\d{2,4})(?:[-.x ]*(\d+))?)\s*$/gm;return 0<(check+=el.value.match(format)?0:1)?(el.value.match(format)||(el.className+=" invalid"),document.getElementById(el.id+"-row").innerHTML+=`<small class="efb text-danger" id="${el.id}-message">${efb_var.text.enterThePhone}</small>`):document.getElementById("alarm_emsFormBuilder")&&el.classList.remove("invalid"),!(0<check)}function valid_file_emsFormBuilder(id){document.getElementById(id+"-message")&&document.getElementById(id+"-message").remove();let file="";var f=valueJson_ws.find(x=>x.id_===id);file=f.file;let check=0,rtrn=!1;var el=document.getElementById(id),f=el.accept.split(",");if(el.files[0]&&el.files[0].size<15e6)for(var ac of f)-1!=el.files[0].type.indexOf(ac.slice(1,ac.length))&&(check=1);if(0<check){new FileReader;el.setAttribute("data-title",el.files[0].name),el.classList.remove("text-warning"),el.classList.add("text-secondary"),document.getElementById(id+"-message")&&document.getElementById(id+"-message").remove(),rtrn=!0}else{file=file.replaceAll(",",` ${efb_var.text.or} `);let message=efb_var.text.pleaseUploadA.replace("NN",file);el.classList.add("text-warning"),el.classList.remove("text-secondary"),el.files[0]&&(message=el.files[0].size<15e6?`Please upload the ${file} file (${f.join()})`:`The ${file} size is too large, maximum size of a file is 15MB. Try new ${file} file`),el.setAttribute("data-title",message),document.getElementById(id+"-row").innerHTML+=`<small class="efb text-danger" id="${el.id}-message">${message}</small>`,rtrn=!1}return rtrn}jQuery(function(){null!=typeof ajax_object_efm_core&&1==Number(ajax_object_efm_core.check)&&(fun_render_view_core_emsFormBuilder(ajax_object_efm_core.check),validate_edit_mode_emsFormBuilder=!0)});